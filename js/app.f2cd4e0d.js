(function(){"use strict";var e={3854:function(e,t,a){var l=a(9242),o=a(3396),i=a(7718),n=a(8106),s=a(4454),d=a(3140);function r(e,t,a,l,r,m){const u=(0,o.up)("NavigationDrawer"),c=(0,o.up)("NavBar"),p=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(i.q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s.s,null,{default:(0,o.w5)((()=>[e.isLogin?((0,o.wg)(),(0,o.j4)(u,{key:0})):(0,o.kq)("",!0),e.isLogin?((0,o.wg)(),(0,o.j4)(n.L,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(d.O,{class:"d-flex align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p)])),_:1})])),_:1})])),_:1})}var m=a(65),u=a(7312),c=a(3369),p=a(6824),h=a(8521);const w=(0,o._)("img",{class:"website-logo",src:"https://static.wixstatic.com/media/a2c5d8_c4200c39dc3647a0a3a0bebebd9ab1c3~mv2.png/v1/fill/w_640,h_184,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/a2c5d8_c4200c39dc3647a0a3a0bebebd9ab1c3~mv2.png"},null,-1),f={class:"nav-items-card d-flex flex-row align-center justify-space-around"},g={class:"nav-item"};function y(e,t,a,l,i,n){const s=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"space-between",class:"nav-bar-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(s,{to:"/"},{default:(0,o.w5)((()=>[w])),_:1})])])),_:1}),(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o._)("div",f,[(0,o._)("div",g,[(0,o.Wm)(u.T,{variant:"outlined",color:"warning",onClick:t[0]||(t[0]=t=>e.$store.dispatch("onLogout"))},{default:(0,o.w5)((()=>[(0,o.Uk)(" Logout ")])),_:1})])])])),_:1})])),_:1})])),_:1})}var _={components:{},computed:{...(0,m.rn)(["isAdmin"])}},k=a(89);const v=(0,k.Z)(_,[["render",y]]);var D=v,j=a(4075),W=a(8777),b=a(6145),S=a(7754),C=a(9657);const I={class:"mb-5"},V={key:0};function x(e,t,a,l,i,n){const s=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(C.V,{"expand-on-hover":"",rail:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{to:"/profile",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.l,{"prepend-avatar":"https://media.istockphoto.com/id/1300845620/vector/user-icon-flat-isolated-on-white-background-user-symbol-vector-illustration.jpg?s=612x612&w=0&k=20&c=yBeyba0hUkh14_jgv1OKqIH0CCSWU_4ckRkAoy2p73o=",title:e.$store.state.employeeName,nav:""},null,8,["title"])])),_:1}),(0,o.Wm)(j.J),(0,o.Wm)(b.i,{density:"compact",nav:""},{default:(0,o.w5)((()=>[(0,o._)("div",I,[(0,o.Wm)(S.b,{class:"text-subtitle-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("EMPLOYEE")])),_:1}),(0,o.Wm)(s,{to:"/submit_timesheet/",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.l,{"prepend-icon":"mdi-file-send",title:"Submit Timesheet",value:"home"})])),_:1}),(0,o.Wm)(s,{to:"/",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.l,{"prepend-icon":"mdi-text-box-search",title:"Search Timesheet",value:"searchTimesheet"})])),_:1}),(0,o.Wm)(s,{to:"/review_timesheets",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.l,{"prepend-icon":"mdi-file-check",title:"Review Timesheets",value:"reviewTimesheets"})])),_:1})]),e.isAdmin?((0,o.wg)(),(0,o.iD)("div",V,[(0,o.Wm)(S.b,{class:"text-subtitle-1"},{default:(0,o.w5)((()=>[(0,o.Uk)("Admin")])),_:1}),(0,o.Wm)(s,{to:"/",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.l,{"prepend-icon":"mdi-account-search",title:"Employee Timesheet",value:"employeeTimesheet"})])),_:1}),(0,o.Wm)(s,{to:"/employees",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.l,{"prepend-icon":"mdi-account-supervisor",title:"Employees",value:"employees"})])),_:1}),(0,o.Wm)(s,{to:"/customers",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.l,{"prepend-icon":"mdi-domain",title:"Customers",value:"customers"})])),_:1}),(0,o.Wm)(s,{to:"/projects",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.l,{"prepend-icon":"mdi-file-multiple",title:"Projects",value:"projects"})])),_:1}),(0,o.Wm)(s,{to:"/export",class:"router-link"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.l,{"prepend-icon":"mdi-export",title:"Export Timesheet",value:"export"})])),_:1})])):(0,o.kq)("",!0)])),_:1})])),_:1})}var T={data(){return{}},components:{},computed:{...(0,m.rn)(["isAdmin"])}};const P=(0,k.Z)(T,[["render",x],["__scopeId","data-v-0ce2d6b6"]]);var L=P,E={name:"App",data:()=>({isUserLogin:!1}),components:{NavBar:D,NavigationDrawer:L},computed:{...(0,m.rn)(["isLogin"])},created(){this.$store.dispatch("checkUserValidity")}};const N=(0,k.Z)(E,[["render",r]]);var O=N,R=(a(7658),a(493)),U=a(2890),$=a(6511),M=a(5174),H=a(4294),A=a(2483),z=a(7139),q=a(6422),Z=a(8694),F=a(4286),G=a(165),Y=a(8952);const B=e=>((0,o.dD)("data-v-0c41125e"),e=e(),(0,o.Cn)(),e),K=B((()=>(0,o._)("h1",{class:"user-login-heading"},"USER LOGIN",-1))),J={class:"w-100 d-flex flex-row justify-end"},X=B((()=>(0,o._)("br",null,null,-1))),Q={class:"error-msg"},ee=B((()=>(0,o._)("h1",{class:"user-login-heading"},"RESET PASSWORD",-1))),te={key:0},ae=B((()=>(0,o._)("p",{class:"reset-mail-para"}," Please enter your email address. We'll send you a link to reset your password ",-1))),le={key:1,class:"reset-mail-para"},oe={class:"email-highlight"},ie={class:"w-100 d-flex flex-row justify-end"},ne=B((()=>(0,o._)("br",null,null,-1))),se={class:"error-msg"};function de(e,t,a,i,n,s){return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"login-bg-container d-flex align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"center",align:"center",class:"row"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",sm:"12",md:"10",lg:"8",class:"column"},{default:(0,o.w5)((()=>[(0,o.Wm)(F.C,{class:"d-flex flex-row justify-center",height:"100%",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(F.C,{width:"55%",class:"pa-5 d-none d-sm-block",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z.f,{class:"flex-grow-0",width:"100%",cover:"",src:"https://img.freepik.com/free-vector/time-management-successful-teamwork-deadline-stress-overcoming-with-task-planning-control-alarm-clock-flat-composition-vector-illustration_1284-30802.jpg?w=740&t=st=1694003246~exp=1694003846~hmac=19639599c6bb0ae75a0c689223304441d8bf319b08536ff2f287e8401382c940"})])),_:1}),(0,o.Wm)(F.C,{"min-width":"45%",class:"d-flex flex-row align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(Y.Qn,null,{default:(0,o.w5)((()=>[n.isLoginView?((0,o.wg)(),(0,o.j4)(F.C,{key:0,"min-width":"95%",class:"form-sheet mx-auto pa-5 d-flex flex-column justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(F.C,{width:"100%",class:"d-sm-none",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z.f,{class:"flex-grow-0",width:"100%",cover:"",src:"https://img.freepik.com/premium-vector/woman-sitting-hourglass_165488-4217.jpg?w=740"})])),_:1}),K,(0,o.Wm)(q.O,{modelValue:n.form,"onUpdate:modelValue":t[3]||(t[3]=e=>n.form=e),onSubmit:(0,l.iM)(s.onSubmit,["prevent"]),class:"w-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",placeholder:"Employee Id","prepend-inner-icon":"mdi-account",variant:"outlined",rules:[e.fieldRules.required],class:"mb-3",modelValue:n.employeeId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employeeId=e)},null,8,["rules","modelValue"]),(0,o.Wm)(G.h,{"append-inner-icon":n.visible?"mdi-eye-off":"mdi-eye",type:n.visible?"text":"password",density:"compact",placeholder:"Password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":t[1]||(t[1]=e=>n.visible=!n.visible),rules:[e.fieldRules.required,n.rules.min],modelValue:n.password,"onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e)},null,8,["append-inner-icon","type","rules","modelValue"]),(0,o._)("div",J,[(0,o.Wm)(u.T,{variant:"text",color:"blue",onClick:s.toggleLoginView},{default:(0,o.w5)((()=>[(0,o.Uk)("Forgot Password ?")])),_:1},8,["onClick"])]),X,(0,o._)("p",Q,(0,z.zw)(n.errorMsg),1),(0,o.Wm)(u.T,{disabled:!n.form,loading:n.loading,block:"",color:"primary",size:"large",type:"submit",variant:"elevated"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Log In ")])),_:1},8,["disabled","loading"])])),_:1},8,["modelValue","onSubmit"])])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(Y.Zy,null,{default:(0,o.w5)((()=>[n.isForgotView?((0,o.wg)(),(0,o.j4)(F.C,{key:0,"min-width":"95%",class:"form-sheet mx-auto pa-5 d-flex flex-column justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(F.C,{width:"100%",class:"d-sm-none",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z.f,{class:"flex-grow-0",width:"100%",cover:"",src:"https://img.freepik.com/premium-vector/woman-sitting-hourglass_165488-4217.jpg?w=740"})])),_:1}),ee,(0,o.Wm)(q.O,{modelValue:n.form,"onUpdate:modelValue":t[5]||(t[5]=e=>n.form=e),onSubmit:(0,l.iM)(s.onSubmit,["prevent"]),class:"w-100"},{default:(0,o.w5)((()=>[n.isEmailVerified?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",te,[ae,(0,o.Wm)(G.h,{density:"compact",placeholder:"Verify you Email","prepend-inner-icon":"mdi-email",variant:"outlined",rules:[e.fieldRules.required,e.fieldRules.email],class:"mb-3",modelValue:n.email,"onUpdate:modelValue":t[4]||(t[4]=e=>n.email=e)},null,8,["rules","modelValue"])])),n.isEmailVerified?((0,o.wg)(),(0,o.iD)("div",le,[(0,o._)("p",null,[(0,o.Uk)("Rest Password link sucessfully sent to "),(0,o._)("span",oe,(0,z.zw)(n.email),1)])])):(0,o.kq)("",!0),(0,o._)("div",ie,[(0,o.Wm)(u.T,{variant:"text",color:"blue",onClick:s.goToLogin},{default:(0,o.w5)((()=>[(0,o.Uk)("Go To Login")])),_:1},8,["onClick"])]),ne,(0,o._)("p",se,(0,z.zw)(n.emailErrorMsg),1),n.isEmailVerified?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(u.T,{key:2,loading:n.emailVerifyLoading,block:"",color:"primary",size:"large",variant:"elevated",onClick:s.verifyAndSendLink},{default:(0,o.w5)((()=>[(0,o.Uk)(" Verify and Send ")])),_:1},8,["loading","onClick"]))])),_:1},8,["modelValue","onSubmit"])])])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var re={data(){return{visible:!1,loading:!1,form:!1,password:"",employeeId:"",errorMsg:"",isLoginView:!0,isForgotView:!1,emailErrorMsg:null,emailVerifyLoading:!1,isEmailVerified:!1,email:null,rules:{required:e=>!!e||"Required.",min:e=>e.length>=8||"Min 8 characters"},employeeIdRule:[e=>e.length>0||"Required"]}},computed:{...(0,m.rn)(["fieldRules"])},methods:{async onSubmit(){if(!this.form)return;this.loading=!0;const e={employeeId:this.employeeId,password:this.password},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},a=await fetch("http://localhost:8001/login",t),l=await a.json();a.ok?await this.$store.dispatch("onSuccesfullLogin",l.jwtToken):this.errorMsg=l.text,this.loading=!1},toggleLoginView(){this.isLoginView=!this.isLoginView,setTimeout((()=>{this.isForgotView=!this.isForgotView}),400)},goToLogin(){this.isForgotView=!this.isForgotView,setTimeout((()=>{this.isLoginView=!this.isLoginView}),400),this.email=null,this.employeeId=null,this.password=null},async verifyAndSendLink(){this.emailVerifyLoading=!0;const e="http://localhost:8001/forgot-password/",t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email})},a=await fetch(e,t),l=await a.json();a.ok?(console.log(l),this.isEmailVerified=!0):this.emailErrorMsg=l.message,this.emailVerifyLoading=!1,console.log(l.message)}}};const me=(0,k.Z)(re,[["render",de],["__scopeId","data-v-0c41125e"]]);var ue=me;const ce={class:"home-bg-container"};function pe(e,t,a,l,i,n){const s=(0,o.up)("EmployeeTimesheet"),d=(0,o.up)("SearchTimesheet");return(0,o.wg)(),(0,o.iD)("div",ce,[e.$store.state.isAdmin?((0,o.wg)(),(0,o.j4)(s,{key:0})):((0,o.wg)(),(0,o.j4)(d,{key:1}))])}var he=a(11),we=a(6572),fe=a(1888),ge=a(1334),ye=a(9234),_e=a(4592),ke=a(4413),ve=a(7471),De=a(5030);const je=e=>((0,o.dD)("data-v-41ac758c"),e=e(),(0,o.Cn)(),e),We={class:"d-flex flex-row align-center"},be=je((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null," TimeSheet Id "),(0,o._)("th",{class:"text-left"}," Employee Id "),(0,o._)("th",{class:"text-left"}," employee Name "),(0,o._)("th",{class:"text-center"}," Week "),(0,o._)("th",{class:"text-center"}," Log Hours "),(0,o._)("th",{class:"text-center"}," Status ")])],-1))),Se={class:"text-left pa-0",width:"200px"},Ce={class:"text-left pa-0",width:"200px"},Ie={class:"text-left pa-0"},Ve={class:"text-left pa-0",width:"250px"},xe={class:"text-center pa-0",width:"150px"},Te={class:"text-center pa-0"},Pe={class:"text-center"},Le={class:"text-center"},Ee={class:"text-center"},Ne={key:0,class:"d-flex flex-row justify-center align-center"},Oe=je((()=>(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1))),Re=[Oe];function Ue(e,t,a,l,i,n){const s=(0,o.up)("DateRange"),d=(0,o.up)("WeekSheet"),r=(0,o.up)("TimesheetStatus");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:e.loading},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Employee TimeSheet")])),_:1})])),_:1}),(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"end"},{default:(0,o.w5)((()=>["customDate"===e.timePeriod?((0,o.wg)(),(0,o.j4)(h.D,{key:0,cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o._)("div",We,[(0,o.Wm)(s,{onUpdateDateRange:n.updateDateRange},null,8,["onUpdateDateRange"]),(0,o.Wm)(u.T,{variant:"text",icon:"mdi mdi-magnify",class:"mt-7",onClick:n.onupdateInput},null,8,["onClick"])])])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.Y,{density:"compact"},{default:(0,o.w5)((()=>[be,(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",Se,[(0,o.Wm)(G.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search TimeSheet Id",type:"number",modelValue:e.timeSheetId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.timeSheetId=t),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,o._)("th",Ce,[(0,o.Wm)(G.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Employee Id",modelValue:e.employeeId,"onUpdate:modelValue":t[1]||(t[1]=t=>e.employeeId=t),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,o._)("th",Ie,[(0,o.Wm)(G.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Name",modelValue:e.employeeName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.employeeName=t),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,o._)("th",Ve,[(0,o.Wm)(_e.rL,{items:e.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Select a Time Period","hide-details":"",modelValue:e.timePeriod,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.timePeriod=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])]),(0,o._)("th",xe,[(0,o.Wm)(G.h,{loading:e.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Hours",type:"number",modelValue:e.logHours,"onUpdate:modelValue":t[4]||(t[4]=t=>e.logHours=t),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])]),(0,o._)("th",Te,[(0,o.Wm)(_e.rL,{items:e.statusOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Status","hide-details":"",modelValue:e.status,"onUpdate:modelValue":[t[5]||(t[5]=t=>e.status=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.timeSheets,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.name},[(0,o._)("td",null,(0,z.zw)(e.timeSheetId),1),(0,o._)("td",null,(0,z.zw)(e.employeeId),1),(0,o._)("td",null,(0,z.zw)(e.employeeName),1),(0,o._)("td",Pe,[(0,o.Wm)(d,{title:e.week,timeSheet:e,onGetTimeSheets:n.getTimeSheets},null,8,["title","timeSheet","onGetTimeSheets"])]),(0,o._)("td",Le,(0,z.zw)(e.logHours),1),(0,o._)("td",Ee,[(0,o.Wm)(r,{status:e.status},null,8,["status"])])])))),128))])])),_:1})])),_:1}),0===e.timeSheets.length?((0,o.wg)(),(0,o.iD)("div",Ne,Re)):(0,o.kq)("",!0),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}var $e=a(1271),Me=a(3833);const He=e=>((0,o.dD)("data-v-4c8b82a4"),e=e(),(0,o.Cn)(),e),Ae={class:"d-flex flex-row align-center"},ze={class:"d-flex flex-column mr-3 w-50"},qe=He((()=>(0,o._)("label",{class:"calender-input-label"},"Start Date",-1))),Ze={class:"d-flex flex-column w-50"},Fe=He((()=>(0,o._)("label",{class:"calender-input-label"},"End Date",-1)));function Ge(e,t,a,i,n,s){return(0,o.wg)(),(0,o.iD)("div",Ae,[(0,o._)("div",ze,[qe,(0,o.wy)((0,o._)("input",{class:"calendar-input",type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>n.startDate=e),onChange:t[1]||(t[1]=(...e)=>s.onDateChange&&s.onDateChange(...e))},null,544),[[l.nr,n.startDate]])]),(0,o._)("div",Ze,[Fe,(0,o.wy)((0,o._)("input",{class:"calendar-input",type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>n.endDate=e),onChange:t[3]||(t[3]=(...e)=>s.onDateChange&&s.onDateChange(...e))},null,544),[[l.nr,n.endDate]])])])}var Ye={data(){return{startDate:null,endDate:null}},methods:{onDateChange(){this.$emit("updateDateRange",{startDate:new Date(this.startDate),endDate:new Date(this.endDate)})}}};const Be=(0,k.Z)(Ye,[["render",Ge],["__scopeId","data-v-4c8b82a4"]]);var Ke=Be,Je=a(3601);const Xe={class:"d-flex flex-row justify-space-between"},Qe={class:"text-h7"},et={style:{"font-size":"14px"}},tt={class:"text-h9"},at={key:0},lt={key:1},ot={key:2};function it(e,t,a,l,i,n){const s=(0,o.up)("NonEditableTable"),d=(0,o.up)("AdminButton"),r=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(Je.B,{modelValue:e.dialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dialog=t),persistent:"",width:"1024"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"text"},e,{class:"week-number-link",onClick:n.onClickWeek}),{default:(0,o.w5)((()=>[(0,o.Uk)((0,z.zw)(a.title),1)])),_:2},1040,["onClick"])])),default:(0,o.w5)((()=>[(0,o.Wm)(he._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o._)("div",Xe,[(0,o._)("span",Qe,"TimeSheet ID : "+(0,z.zw)(a.timeSheet.timeSheetId),1),(0,o._)("p",et,(0,z.zw)(e.getFormatedDateString(a.timeSheet.startDate))+" - "+(0,z.zw)(e.getFormatedDateString(a.timeSheet.endDate)),1),(0,o._)("span",tt,"Employee ID: "+(0,z.zw)(a.timeSheet.employeeId),1)])])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{timeSheetObj:a.timeSheet},null,8,["timeSheetObj"])])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),(0,o.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[0]||(t[0]=t=>e.dialog=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),a.timeSheet.reportingManagerId!==e.employeeId&&!e.isAdmin||"submited"!==a.timeSheet.status?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",at,[(0,o.Wm)(d,{color:"warning",text:"Re-open",onOnClickOpen:n.onClickOpen,loading:e.openLoading},null,8,["onOnClickOpen","loading"]),(0,o.Wm)(d,{color:"red",text:"Deny",onOnClickDeny:n.onClickDeny,loading:e.denyLoading},null,8,["onOnClickDeny","loading"]),(0,o.Wm)(d,{color:"green",text:"Approve",onOnClickApprove:n.onClickApprove,loading:e.approveLoading},null,8,["onOnClickApprove","loading"])])),e.isAdmin||"open"!==a.timeSheet.status?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",lt,[(0,o.Wm)(r,{to:`submit_timesheet/?calendarValue=${a.timeSheet.week}`},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{variant:"outlined",color:"green"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Edit & Submit ")])),_:1})])),_:1},8,["to"])])),e.isAdmin||"denied"!==a.timeSheet.status?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",ot,[(0,o.Wm)(r,{to:`submit_timesheet/?calendarValue=${a.timeSheet.week}`},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{variant:"outlined",color:"green"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Re-Open ")])),_:1})])),_:1},8,["to"])]))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var nt=a(3173);const st=e=>((0,o.dD)("data-v-03a5d414"),e=e(),(0,o.Cn)(),e),dt={key:0,class:"w-100 d-flex flex-row align-center justify-center",style:{height:"200px"}},rt=st((()=>(0,o._)("th",{class:"text-left",width:"250px"}," Projects ",-1))),mt=st((()=>(0,o._)("th",{style:{"font-size":"14px","font-weight":"bold",color:"black"}}," Total: ",-1))),ut={class:"mt-6 mb-6 font-weight-medium"},ct={class:"text-center"},pt={class:"text-center"},ht={class:"text-center"},wt={class:"text-center"},ft={class:"text-center"},gt={class:"text-center"},yt={class:"text-center"},_t={class:"text-center"},kt=st((()=>(0,o._)("td",null,[(0,o._)("p",null," Total : ")],-1))),vt={class:"text-center"},Dt={class:"text-center"},jt={class:"text-center"},Wt={class:"text-center"},bt={class:"text-center"},St={class:"text-center"},Ct={class:"text-center"},It={class:"text-center"};function Vt(e,t,a,l,i,n){const s=(0,o.up)("CommentPopup");return(0,o.wg)(),(0,o.iD)("div",null,[i.loading?((0,o.wg)(),(0,o.iD)("div",dt,[(0,o.Wm)(nt.L,{color:"primary",indeterminate:""})])):(0,o.kq)("",!0),i.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(c.K,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.Y,null,{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[rt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.daysOfWeek,(e=>((0,o.wg)(),(0,o.iD)("th",{style:{"font-size":"13px"},class:"text-left",key:e},(0,z.zw)(e),1)))),128)),mt])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.timeSheetList,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,[(0,o._)("div",ut,[(0,o._)("p",null,(0,z.zw)(e.projectName),1)])]),(0,o._)("td",ct,[(0,o.Wm)(s,{comment:e.mondayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.monday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",pt,[(0,o.Wm)(s,{comment:e.tuesdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.tuesday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",ht,[(0,o.Wm)(s,{comment:e.wednesdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.wednesday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",wt,[(0,o.Wm)(s,{comment:e.thursdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.thursday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",ft,[(0,o.Wm)(s,{comment:e.fridayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.friday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",gt,[(0,o.Wm)(s,{comment:e.satuardayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.satuarday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",yt,[(0,o.Wm)(s,{comment:e.sundayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.sunday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",_t,[(0,o._)("p",null,(0,z.zw)(e.total),1)])])))),128)),(0,o._)("tr",null,[kt,(0,o._)("td",vt,(0,z.zw)(n.getTotalHoursOfDay("monday")),1),(0,o._)("td",Dt,(0,z.zw)(n.getTotalHoursOfDay("tuesday")),1),(0,o._)("td",jt,(0,z.zw)(n.getTotalHoursOfDay("wednesday")),1),(0,o._)("td",Wt,(0,z.zw)(n.getTotalHoursOfDay("thursday")),1),(0,o._)("td",bt,(0,z.zw)(n.getTotalHoursOfDay("friday")),1),(0,o._)("td",St,(0,z.zw)(n.getTotalHoursOfDay("satuarday")),1),(0,o._)("td",Ct,(0,z.zw)(n.getTotalHoursOfDay("sunday")),1),(0,o._)("td",It,(0,z.zw)(n.getTotal),1)])])])),_:1})])),_:1})])),_:1}))])}const xt={class:"d-flex flex-row align-center justify-center"};function Tt(e,t,a,l,i,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(he._,{variant:"text"},{default:(0,o.w5)((()=>[(0,o._)("div",xt,[(0,o.WI)(e.$slots,"default"),n.isCommentValid?((0,o.wg)(),(0,o.j4)(u.T,{key:0,variant:"text",icon:"mdi-comment",size:"small",onClick:n.onClickIcon},null,8,["onClick"])):(0,o.kq)("",!0)])])),_:3}),(0,o.Wm)(Je.B,{width:"500",modelValue:i.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dialog=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,z.zw)(a.comment),1)])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),(0,o.Wm)(u.T,{text:"Close",onClick:n.onClose},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var Pt={data(){return{dialog:!1}},props:["comment"],computed:{isCommentValid(){return"null"!==this.comment&&""!==this.comment&&null!==this.comment}},methods:{onClickIcon(){this.dialog=!0},onClose(){this.dialog=!1}}};const Lt=(0,k.Z)(Pt,[["render",Tt]]);var Et=Lt,Nt={data(){return{selectValue:"",loading:!1,timeSheetList:[],sheetObj:this.timeSheetObj}},props:["timeSheetObj"],components:{CommentPopup:Et},watch:{timeSheetObj(e){this.sheetObj=e,this.getTimeSheetData()}},computed:{...(0,m.Se)(["getHeaders"]),getTotal(){const e=this.timeSheetList;let t=0;return e.forEach((e=>{t+=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday})),t.toFixed(1)}},methods:{getTotalHoursOfDay(e){const t=this.timeSheetList;let a=0;return t.forEach((t=>{a+=t[e]})),a.toFixed(1)},async getTimeSheetData(){this.loading=!0;const e=`http://localhost:8001/timesheet/projects/${this.sheetObj.timeSheetId}`,t={method:"GET",...this.getHeaders};try{const a=await fetch(e,t);if(a.ok){const e=await a.json();this.timeSheetList=e}}catch(a){console.log(a)}this.loading=!1},checkAndGetValue(e){return 0===e?null:e}},mounted(){this.getTimeSheetData()}};const Ot=(0,k.Z)(Nt,[["render",Vt],["__scopeId","data-v-03a5d414"]]);var Rt=Ot,Ut=a(4842);function $t(e,t,a,l,i,n){return(0,o.wg)(),(0,o.j4)(Je.B,{modelValue:i.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dialog=e),width:"500",persistent:""},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)(e,{variant:"outlined",color:a.color,text:a.text,loading:a.loading}),null,16,["color","text","loading"])])),default:(0,o.w5)((({isActive:e})=>[(0,o.Wm)(he._,{title:`Comment for ${a.text}`},{default:(0,o.w5)((()=>[(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{name:"input-7-1",variant:"outlined","auto-grow":"",modelValue:i.comment,"onUpdate:modelValue":t[0]||(t[0]=e=>i.comment=e),rules:i.commentRules},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),(0,o.Wm)(u.T,{text:"Cancel",onClick:t=>e.value=!1},null,8,["onClick"]),(0,o.Wm)(u.T,{variant:"outlined",onClick:n.onClickActionButton,text:a.text,color:a.color,disabled:i.comment.length<1},null,8,["onClick","text","color","disabled"])])),_:2},1024)])),_:2},1032,["title"])])),_:1},8,["modelValue"])}var Mt={data(){return{dialog:!1,comment:"",commentRules:[e=>e.length>0||"Comment Required"]}},props:["color","text","loading"],methods:{async onClickActionButton(){"Approve"===this.text?this.$emit("onClickApprove",this.comment):"Deny"===this.text?this.$emit("onClickDeny",this.comment):"Re-open"===this.text&&this.$emit("onClickOpen",this.comment),this.dialog=!1}}};const Ht=(0,k.Z)(Mt,[["render",$t]]);var At=Ht,zt=a(8914),qt=(a(3579),{data:()=>({dialog:!1,isLoading:!1,approveLoading:!1,denyLoading:!1,openLoading:!1}),computed:{...(0,m.rn)(["employeeId","employeeName","isAdmin"]),...(0,m.Se)(["getFormatedDateString"])},components:{NonEditableTable:Rt,AdminButton:At},props:["title","timeSheet"],methods:{onClickWeek(){this.$store.dispatch("updateSelectedWeek",this.timeSheet.week)},async onClickApprove(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.approveLoading=!0,await this.$store.dispatch("approveTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Approved"}),this.$emit("getTimeSheets"),this.dialog=!1,this.approveLoading=!1,this.dialog=!1},async onClickOpen(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.openLoading=!0,await this.$store.dispatch("openTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Re-Opened"}),this.$emit("getTimeSheets"),this.openLoading=!1,this.dialog=!1},async onClickDeny(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.denyLoading=!0,await this.$store.dispatch("denyTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Denied"}),this.$emit("getTimeSheets"),this.denyLoading=!1,this.dialog=!1},async downloadPDF(){const e=new zt["default"];e.text(`Employee ID : ${this.timeSheet.employeeId}`,10,10),e.text(`Employee Name : ${this.timeSheet.employeeName}`,10,20),e.text(`Period : ${this.getFormatedDateString(this.timeSheet.startDate)} - ${this.getFormatedDateString(this.timeSheet.endDate)}`,10,30);const t={method:"GET","Content-Type":"application/json"},a=await fetch(`http://localhost:8001/timesheet/export/${this.timeSheet.timeSheetId}`,t);if(a.ok){const t=await a.json(),l=["Project Id","Project Name","Hours","Cost (Euros)"];let o=0,i=0;const n=t.map((e=>(o+=e.cost,i+=e.total,[e.projectId,e.projectName,e.total,e.cost])));n.push(["Total","",i,o]),e.autoTable({head:[l],body:n,startY:50}),e.save("weekly_timesheet_report.pdf"),this.$store.dispatch("showNotification","Pdf Downloading..")}}}});const Zt=(0,k.Z)(qt,[["render",it],["__scopeId","data-v-6dfa74e8"]]);var Ft=Zt,Gt=a(7103);function Yt(e,t,a,l,i,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(Gt.v,{class:"ma-2",color:n.colorName},{default:(0,o.w5)((()=>[(0,o.Uk)((0,z.zw)(n.statusName),1)])),_:1},8,["color"])])}var Bt={props:["status"],computed:{colorName(){return"open"===this.status?"blue":"submited"===this.status?"success":"approved"===this.status?"teal":"denied"===this.status?"red":""},statusName(){return"open"===this.status?"Open":"submited"===this.status?"Submitted":"approved"===this.status?"Approved":"denied"===this.status?"Denied":"invalid"}}};const Kt=(0,k.Z)(Bt,[["render",Yt]]);var Jt=Kt,Xt={name:"TimeSheet",data:()=>({dialog:!1,loading:!1,timeSheetId:"",employeeId:"",employeeName:"",logHours:"",status:"",statusOptions:[{title:"All",value:""},{title:"Open",value:"open"},{title:"Submited",value:"submited"},{title:"Approved",value:"approved"},{title:"Denied",value:"denied"}],dateRange:{startDate:new Date,endDate:new Date},timePeriodOptions:[{value:"month1",title:"Last 1 Month"},{value:"month3",title:"Last 3 Months"},{value:"month6",title:"Last 6 Months"},{value:"lastYear",title:"Previous Year"},{value:"currentYear",title:"Current Year"},{value:"customDate",title:"Custom Date"}],timePeriod:null,timeSheets:[{employeeId:1001,employeeName:"vinith kumar",week:"2023-W37",logHours:"40",status:"Pending"},{employeeId:1002,employeeName:"Rahul",week:"2023-W36",logHours:"39",status:"submited"}]}),components:{DateRange:Ke,WeekSheet:Ft,TimesheetStatus:Jt},watch:{timeSheetId(e){null===e&&(this.timeSheetId="")},employeeId(e){null===e&&(this.employeeId="")},employeeName(e){null===e&&(this.employeeName="")},logHours(e){null===e&&(this.logHours="")},status(e){null===e&&(this.filterStatus="")}},computed:{...(0,m.Se)(["getHeaders"])},methods:{async onupdateInput(){this.loading=!0,await this.getTimeSheets(),this.loading=!1},getStartAndEndDate(){const e=new Date;let t=null,a=e;switch(this.timePeriod){case"month1":t=(0,$e.Z)(e,30);break;case"month3":t=(0,$e.Z)(e,90);break;case"month6":t=(0,$e.Z)(e,180);break;case"lastYear":t=(0,Me.Z)(new Date(e.getFullYear(),0,1),1),a=(0,Me.Z)(new Date(e.getFullYear(),11,31),1);break;case"currentYear":t=new Date(e.getFullYear(),0,1);break;case"customDate":t=this.dateRange.startDate,a=this.dateRange.endDate;break;default:t=new Date(e.getFullYear(),0,1);break}return{startDate:(0,$.Z)(t,"yyyy-MM-dd"),endDate:(0,$.Z)(a,"yyyy-MM-dd")}},async getTimeSheets(){const{startDate:e,endDate:t}=this.getStartAndEndDate(),a=`http://localhost:8001/timesheets?timesheet_id=${this.timeSheetId}&&employee_id=${this.employeeId}&&employee_name=${this.employeeName}&&log_hours=${this.logHours}&&start_date=${e}&&end_date=${t}&&status=${this.status}`,l={method:"GET",...this.getHeaders},o=await fetch(a,l);if(o.ok){const e=await o.json();this.timeSheets=e}},updateDateRange(e){this.dateRange=e},async exportMonthly(){const e="http://localhost:8001/timesheet/monthly_report/1001",t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.downloadPDF(e)}},async downloadPDF(e){const t=new zt["default"],a=["Project Id","Project Name","Hours","Cost"];let l=0,o=0;const i=e.map((e=>(l+=e.cost,o+=e.total,[e.projectId,e.projectName,e.total,e.cost])));i.push(["Total","",o,l]),t.autoTable({head:[a],body:i,startY:50}),t.save("monthly_timesheet_report.pdf"),this.$store.dispatch("showNotification","Pdf Downloading..")}},mounted(){this.getTimeSheets()}};const Qt=(0,k.Z)(Xt,[["render",Ue],["__scopeId","data-v-41ac758c"]]);var ea=Qt;const ta=e=>((0,o.dD)("data-v-eeaa7fae"),e=e(),(0,o.Cn)(),e),aa={class:"d-flex flex-row align-center"},la={class:"d-flex flex-row align-center"},oa=ta((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-left"}," Timesheet Id "),(0,o._)("th",{class:"text-left"}," Employee Id "),(0,o._)("th",{class:"text-left"}," employee Name "),(0,o._)("th",{class:"text-center"}," Week "),(0,o._)("th",{class:"text-center"}," Log Hours "),(0,o._)("th",{class:"text-center"}," Status ")])],-1))),ia={class:"text-center"},na={class:"text-center"},sa={key:0,class:"d-flex flex-row justify-center align-center"},da=ta((()=>(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1))),ra=[da];function ma(e,t,a,l,i,n){const s=(0,o.up)("DateRange"),d=(0,o.up)("WeekSheet"),r=(0,o.up)("TimesheetStatus");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:e.loading},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Search TimeSheet")])),_:1})])),_:1}),(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",aa,[(0,o.Wm)(_e.rL,{items:e.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",label:"Select a Time Period","hide-details":"",modelValue:e.timePeriod,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.timePeriod=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{items:e.statusOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Status","hide-details":"",modelValue:e.status,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.status=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])),_:1}),"customDate"===e.timePeriod?((0,o.wg)(),(0,o.j4)(h.D,{key:0,cols:"12",md:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",la,[(0,o.Wm)(s,{onUpdateDateRange:n.updateDateRange},null,8,["onUpdateDateRange"]),(0,o.Wm)(u.T,{variant:"text",icon:"mdi mdi-magnify",class:"mt-7",onClick:n.onupdateInput},null,8,["onClick"])])])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.Y,{density:"compact"},{default:(0,o.w5)((()=>[oa,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.timeSheets,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.name},[(0,o._)("td",null,(0,z.zw)(e.timeSheetId),1),(0,o._)("td",null,(0,z.zw)(e.employeeId),1),(0,o._)("td",null,(0,z.zw)(e.employeeName),1),(0,o._)("td",null,[(0,o.Wm)(d,{title:e.week,timeSheet:e,onGetTimeSheets:n.getTimeSheets},null,8,["title","timeSheet","onGetTimeSheets"])]),(0,o._)("td",ia,(0,z.zw)(e.logHours),1),(0,o._)("td",na,[(0,o.Wm)(r,{status:e.status},null,8,["status"])])])))),128))])])),_:1})])),_:1}),0===e.timeSheets.length?((0,o.wg)(),(0,o.iD)("div",sa,ra)):(0,o.kq)("",!0),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}var ua={name:"TimeSheet",data:()=>({dialog:!1,loading:!1,status:"",dateRange:{startDate:new Date,endDate:new Date},statusOptions:[{title:"All",value:""},{title:"Open",value:"open"},{title:"Submited",value:"submited"},{title:"Approved",value:"approved"},{title:"Denied",value:"denied"}],timePeriodOptions:[{value:"month1",title:"Last 1 Month"},{value:"month3",title:"Last 3 Months"},{value:"month6",title:"Last 6 Months"},{value:"lastYear",title:"Previous Year"},{value:"currentYear",title:"Current Year"},{value:"customDate",title:"Custom Date"}],timePeriod:null,timeSheets:[{timeSheetId:1,employeeId:1001,employeeName:"vinith kumar",week:"2023-W37",logHours:"40",status:"open"},{timeSheetId:2,employeeId:1002,employeeName:"Rahul",week:"2023-W36",logHours:"39",status:"submited"}]}),components:{DateRange:Ke,WeekSheet:Ft,TimesheetStatus:Jt},computed:{...(0,m.rn)(["employeeId"]),...(0,m.Se)(["getHeaders"])},methods:{onupdateInput(){this.getTimeSheets()},getStartAndEndDate(){const e=new Date;let t=null,a=e;switch(this.timePeriod){case"month1":t=(0,$e.Z)(e,30);break;case"month3":t=(0,$e.Z)(e,90);break;case"month6":t=(0,$e.Z)(e,180);break;case"lastYear":t=(0,Me.Z)(new Date(e.getFullYear(),0,1),1),a=(0,Me.Z)(new Date(e.getFullYear(),11,31),1);break;case"currentYear":t=new Date(e.getFullYear(),0,1);break;case"customDate":t=this.dateRange.startDate,a=this.dateRange.endDate;break;default:t=new Date(e.getFullYear(),0,1);break}return{startDate:(0,$.Z)(t,"yyyy-MM-dd"),endDate:(0,$.Z)(a,"yyyy-MM-dd")}},async getTimeSheets(){this.loading=!0;const{startDate:e,endDate:t}=this.getStartAndEndDate(),a=`http://localhost:8001/timesheets?employee_id=${this.employeeId}&&start_date=${e}&&end_date=${t}&&status=${this.status}`,l={method:"GET",...this.getHeaders},o=await fetch(a,l);if(o.ok){const e=await o.json();this.timeSheets=e}this.loading=!1},updateDateRange(e){this.dateRange=e}},mounted(){this.getTimeSheets()}};const ca=(0,k.Z)(ua,[["render",ma],["__scopeId","data-v-eeaa7fae"]]);var pa=ca,ha={components:{EmployeeTimesheet:ea,SearchTimesheet:pa}};const wa=(0,k.Z)(ha,[["render",pe],["__scopeId","data-v-389003e8"]]);var fa=wa,ga=a(1222),ya=a(4846),_a=a(1275);const ka=e=>((0,o.dD)("data-v-d09a9f34"),e=e(),(0,o.Cn)(),e),va={class:"d-flex flex-row align-center"},Da={key:0},ja={key:1},Wa={key:2},ba={class:"errorMsg text-subtitle-2"},Sa={class:"errorMsg"},Ca={class:"errorMsg"},Ia=ka((()=>(0,o._)("th",null," Employee Id ",-1))),Va=ka((()=>(0,o._)("th",null," Employee Name ",-1))),xa=ka((()=>(0,o._)("th",null," Email ",-1))),Ta=ka((()=>(0,o._)("th",null," Position ",-1)));function Pa(e,t,a,i,n,s){const d=(0,o.up)("DateRange");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100",style:{height:"100vh"}},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{class:"overflow-y-auto",width:"100%",height:"100%",variant:"elevated",elevation:"10"},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Export Timesheet")])),_:1})])),_:1}),(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",va,[(0,o.Wm)(_e.rL,{items:n.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",variant:"outlined",placeholder:"Time Period","hide-details":"",modelValue:n.timePeriod,"onUpdate:modelValue":[t[0]||(t[0]=e=>n.timePeriod=e),s.onSelectTimePeriod]},null,8,["items","modelValue","onUpdate:modelValue"])])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>["week"===n.timePeriod?((0,o.wg)(),(0,o.iD)("div",Da,[(0,o.wy)((0,o._)("input",{type:"week",class:"week-calendar-input","onUpdate:modelValue":t[1]||(t[1]=e=>n.weekValue=e)},null,512),[[l.nr,n.weekValue]])])):(0,o.kq)("",!0),"month"===n.timePeriod?((0,o.wg)(),(0,o.iD)("div",ja,[(0,o.wy)((0,o._)("input",{type:"month",class:"week-calendar-input","onUpdate:modelValue":t[2]||(t[2]=e=>n.monthValue=e)},null,512),[[l.nr,n.monthValue]])])):(0,o.kq)("",!0),"custom"===n.timePeriod?((0,o.wg)(),(0,o.iD)("div",Wa,[(0,o.Wm)(d,{onUpdateDateRange:s.updateDateRange},null,8,["onUpdateDateRange"])])):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(_a.r,{modelValue:n.exportType,"onUpdate:modelValue":t[3]||(t[3]=e=>n.exportType=e),inline:""},{default:(0,o.w5)((()=>[(0,o.Wm)(ya.R,{label:"PDF",value:"pdf"}),(0,o.Wm)(ya.R,{label:"EXCEL",value:"excel"})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(u.T,{color:"success",onClick:s.onClickExportButton,loading:n.exportLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Export ")])),_:1},8,["onClick","loading"]),(0,o._)("p",ba,(0,z.zw)(n.emptyMsg),1)])])),_:1})])),_:1}),(0,o.Wm)(p.o,{justify:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",type:"number","hide-details":"",placeholder:"Search Employee Id",modelValue:n.searchEmployeeId,"onUpdate:modelValue":t[4]||(t[4]=e=>n.searchEmployeeId=e),onInput:s.onupdateinput},null,8,["modelValue","onInput"]),(0,o._)("p",Sa,(0,z.zw)(n.employeeIdMsg),1)])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(G.h,{density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Employee Name",modelValue:n.searchEmployeeName,"onUpdate:modelValue":t[5]||(t[5]=e=>n.searchEmployeeName=e),onInput:s.onupdateinput},null,8,["modelValue","onInput"]),(0,o._)("p",Ca,(0,z.zw)(n.employeeIdMsg),1)])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(ke.Y,{density:"compact"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,[(0,o.Wm)(ga.x,{modelValue:n.isSelectAll,"onUpdate:modelValue":[t[6]||(t[6]=e=>n.isSelectAll=e),s.onClickSelectAll],label:"All",color:"primary","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),Ia,Va,xa,Ta])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.employeesList,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",null,[(0,o.Wm)(ga.x,{modelValue:n.selectedEmployeeIds,"onUpdate:modelValue":t[7]||(t[7]=e=>n.selectedEmployeeIds=e),color:"primary",value:e.employeeId,"hide-details":""},null,8,["modelValue","value"])]),(0,o._)("td",null,(0,z.zw)(e.employeeId),1),(0,o._)("td",null,(0,z.zw)(e.employeeName),1),(0,o._)("td",null,(0,z.zw)(e.employeeEmail),1),(0,o._)("td",null,(0,z.zw)(e.positionName),1)])))),128))])])),_:1}),(0,o.Wm)(fe.Z),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C)])),_:1})])),_:1})])),_:1})}var La=a(7092),Ea={data(){return{weekValue:"",monthValue:"",timePeriod:null,exportLoading:!1,emptyMsg:"",employeeIdMsg:"",searchEmployeeId:"",searchEmployeeName:"",employeesList:[],exportType:null,timePeriodOptions:[{title:"Export By Week",value:"week"},{title:"Export By Month",value:"month"},{title:"Custom Date",value:"custom"}],selectedEmployeeIds:[],isSelectAll:!1,startDate:null,endDate:null}},components:{DateRange:Ke},computed:{...(0,m.Se)(["getEmployeeDetails","getFormatedDateString","getHeaders"])},watch:{selectedEmployeeIds(e){e.length!==this.employeesList.length?this.isSelectAll=!1:this.isSelectAll=!0}},methods:{onClickSelectAll(e){this.selectedEmployeeIds=e?this.employeesList.map((e=>e.employeeId)):[]},onSelectTimePeriod(e){this.timePeriod=e},onupdateinput(){this.getEmployees()},updateDateRange({startDate:e,endDate:t}){this.startDate=(0,$.Z)(e,"yyyy-MM-dd"),this.endDate=(0,$.Z)(t,"yyyy-MM-dd")},async onClickExportButton(){this.emptyMsg="",this.employeeIdMsg="",this.exportLoading=!0;let e=[];for(let t of this.selectedEmployeeIds){const a=await this.getEmployeeDetails(t);let l=[];"week"===this.timePeriod?l=await this.getWeekData(t):"month"===this.timePeriod?l=await this.getMonthData(t):"custom"===this.timePeriod&&(l=await this.getCustomDateData(t)),e.push({employeeData:a,data:l})}0!==e.length?"pdf"===this.exportType?this.downloadPDF(e):this.downloadExcel(e):this.emptyMsg="Select Atleast One",this.exportLoading=!1},async getWeekData(e){const t=`http://localhost:8001/timesheet/employee/${e}/weekly_export/${this.weekValue}`,a={method:"GET",...this.getHeaders},l=await fetch(t,a);return l.ok?await l.json():[]},getPeriod(){if("week"===this.timePeriod){const[e,t]=this.weekValue,a=new Date(e,0,1),l=(0,R.Z)(a,{weekStartsOn:1}),o=(0,U.Z)(l,t),i=(0,M.Z)(o,6);return`${(0,$.Z)(o,"MMM dd")} - ${(0,$.Z)(i,"MMM dd")} (${this.weekValue})`}if("month"===this.timePeriod){const[e,t]=this.monthValue.split("-"),a=new Date(e,t-1,1);return(0,$.Z)(a,"LLL-yyyy")}return"custom"===this.timePeriod?`${this.getFormatedDateString(this.startDate)} - ${this.getFormatedDateString(this.endDate)}`:"-"},async getMonthData(e){const t=`http://localhost:8001/timesheet/employee/${e}/monthly_export/${this.monthValue}`,a={method:"GET",...this.getHeaders},l=await fetch(t,a);if(l.ok){const e=await l.json();return e}return[]},async getCustomDateData(e){const t=`http://localhost:8001/timesheet/employee/${e}/custom_export/?startDate=${this.startDate}&&endDate=${this.endDate}`,a={method:"GET",...this.getHeaders},l=await fetch(t,a);if(l.ok){const e=await l.json();return e}return[]},async downloadPDF(e){const t=new zt["default"];for(let a of e){const{employeeData:l,data:o}=a;t.text(`Employee ID : ${l.employeeId}`,10,10),t.text(`Employee Name : ${l.employeeName}`,10,20),t.text(`Position : ${l.position}`,10,30),t.text(`Period : ${this.getPeriod()}`,10,40);const i=["Project Id","Project Name","Type","Role","Hours","Rate","Cost","Currency","Customer","Cost Type"];let n=0,s=0;const d=o.map((e=>(n+="Billable"===e.projectType?e.total:0,s+="Non-Billable"===e.projectType?e.total:0,[e.projectId,e.projectName,e.projectType,e.positionName,e.total,e.rate,e.cost,e.currency,e.customerName,e.costType])));d.push([]),d.push(["Total","","Billable","",n,""]),d.push(["Total","","Non-Billable","",s,"",""]),t.autoTable({head:[i],body:d,startY:50}),e[e.length-1]!==a&&t.addPage()}"week"===this.timePeriod?t.save("weekly_report_report.pdf"):"month"===this.timePeriod?t.save("monthly_report.pdf"):"custom"===this.timePeriod&&t.save("custom_date_report.pdf"),this.$store.dispatch("showNotification","Pdf Downloading..")},downloadExcel(e){const t=La.P6.book_new();for(let a of e){const{employeeData:e,data:l}=a;let o=0,i=0;const n=l.map((e=>(o+="Billable"===e.projectType?e.total:0,i+="Non-Billable"===e.projectType?e.total:0,[e.projectId,e.projectName,e.projectType,e.positionName,e.total,e.rate,e.cost,e.currency,e.customerName,e.costType]))),s=[["Employee Id",e.employeeId],["Employee name",e.employeeName],["Position",e.position],["Period",this.getPeriod()],[],["Project Id","Project Name","Type","Role","Hours","Rate","Cost","Currency","Customer","Cost Type"],...n,[],["Total","","Billable","",o],["Total","","Non-Billable","",i]],d=La.P6.json_to_sheet(s);La.P6.book_append_sheet(t,d,e.employeeName)}"week"===this.timePeriod?(0,La.NC)(t,"weekly_timesheet_report.xlsx"):"month"===this.timePeriod?(0,La.NC)(t,"monthly_timesheet_report.xlsx"):"custom"===this.timePeriod&&(0,La.NC)(t,"custom_date_timesheet_report.xlsx")},async getEmployees(){this.loading=!0;const e=`http://localhost:8001/employees?employeeId=${this.searchEmployeeId}&&employeeName=${this.searchEmployeeName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeesList=e,this.loading=!1}}},mounted(){this.getEmployees()}};const Na=(0,k.Z)(Ea,[["render",Pa],["__scopeId","data-v-d09a9f34"]]);var Oa=Na;const Ra={key:0,class:"d-flex flex-row align-center justify-center",style:{height:"200px",width:"100%",border:"1px solid red"}},Ua={class:"d-flex flex-row justify-space-between"},$a={class:"text-h7"},Ma={style:{"font-size":"14px"}},Ha={class:"text-h9"},Aa={key:0};function za(e,t,a,l,i,n){const s=(0,o.up)("NonEditableTable"),d=(0,o.up)("AdminButton");return(0,o.wg)(),(0,o.j4)(c.K,{class:"w-100 h-100 d-flex flex-row justify-center align-start"},{default:(0,o.w5)((()=>[i.loading?((0,o.wg)(),(0,o.iD)("div",Ra)):(0,o.kq)("",!0),i.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(he._,{key:1,width:"1024",variant:"elevated",elevation:"10",loading:i.loading},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Week TimeSheet")])),_:1})])),_:1}),(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o._)("div",Ua,[(0,o._)("span",$a,"TimeSheet ID : "+(0,z.zw)(e.$route.params.timeSheetId),1),(0,o._)("p",Ma,(0,z.zw)(e.getFormatedDateString(e.timeSheet.startDate))+" - "+(0,z.zw)(e.getFormatedDateString(e.timeSheet.endDate)),1),(0,o._)("span",Ha,"Employee ID: "+(0,z.zw)(e.timeSheet.employeeId),1)])])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(s,{timeSheetObj:e.timeSheet},null,8,["timeSheetObj"])])])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),e.timeSheet.reportingManagerId!==e.employeeId&&!e.isAdmin||"submited"!==e.timeSheet.status?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Aa,[(0,o.Wm)(d,{color:"warning",text:"Re-open",onOnClickOpen:n.onClickOpen,loading:i.openLoading},null,8,["onOnClickOpen","loading"]),(0,o.Wm)(d,{color:"red",text:"Deny",onOnClickDeny:n.onClickDeny,loading:i.denyLoading},null,8,["onOnClickDeny","loading"]),(0,o.Wm)(d,{color:"green",text:"Approve",onOnClickApprove:n.onClickApprove,loading:i.approveLoading},null,8,["onOnClickApprove","loading"])]))])),_:1})])),_:1},8,["loading"]))])),_:1})}var qa={data(){return{loading:!0,timesheet:{},openLoading:!1,denyLoading:!1,approveLoading:!1,submitLoading:!1}},components:{NonEditableTable:Rt,AdminButton:At},computed:{...(0,m.rn)(["isAdmin","employeeId"]),...(0,m.Se)(["getFormatedDateString","getHeaders"])},methods:{async getTimeSheet(){this.loading=!0;const e=`http://localhost:8001/timesheet/${this.$route.params.timeSheetId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();console.log(e),this.timeSheet=e,this.loading=!1}},async onClickApprove(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.approveLoading=!0,await this.$store.dispatch("approveTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Approved"}),this.getTimeSheet(),this.approveLoading=!1},async onClickSubmit(){this.submitLoading=!0,await this.$store.dispatch("submitTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmail",{timeSheetId:this.timeSheet.timeSheetId,startDate:this.timeSheet.startDate,endDate:this.timeSheet.endDate}),this.getTimeSheet(),this.submitLoading=!1,this.dialog=!1},async onClickOpen(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.openLoading=!0,await this.$store.dispatch("openTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Re-Opened"}),this.getTimeSheet(),this.openLoading=!1,this.dialog=!1},async onClickDeny(e){const{timeSheetId:t,employeeName:a,startDate:l,endDate:o,officialMail:i}=this.timeSheet;this.denyLoading=!0,await this.$store.dispatch("denyTimeSheet",this.timeSheet.timeSheetId),await this.$store.dispatch("sendEmailOnAction",{timeSheetId:t,employeeName:a,startDate:l,endDate:o,message:e,officialMail:i,action:"Denied"}),this.getTimeSheet(),this.denyLoading=!1,this.dialog=!1}},async mounted(){await this.getTimeSheet(),this.$store.dispatch("updateSelectedWeek",this.timeSheet.week)}};const Za=(0,k.Z)(qa,[["render",za]]);var Fa=Za;const Ga={key:1,class:"d-flex flex-row justify-center"},Ya={key:0,style:{height:"400px",width:"100%"},class:"d-flex flex-row align-center justify-center"};function Ba(e,t,a,l,i,n){const s=(0,o.up)("NewEmployeePopup"),d=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100",style:{height:"100vh"}},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{class:"h-100 overflow-y-auto",variant:"elevated",elevation:"10"},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Employee TimeSheet")])),_:1})])),_:1}),(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{loading:i.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Employee Id",modelValue:i.employeeId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.employeeId=e),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{loading:i.loading,density:"compact",variant:"outlined","hide-details":"",placeholder:"Search Name",modelValue:i.employeeName,"onUpdate:modelValue":t[1]||(t[1]=e=>i.employeeName=e),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{onGetEmployees:n.getEmployees},null,8,["onGetEmployees"])])),_:1})])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[i.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(b.i,{key:0},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.employeesList,(e=>((0,o.wg)(),(0,o.j4)(W.l,{key:e.employeeId,title:`${e.employeeId} - ${e.employeeName}`,subtitle:`Position : ${e.positionName}`,elevation:"4",lines:"three",variant:"elevated",class:"mb-2",rounded:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{to:`project_assignment/${e.employeeId}`},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{color:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("Assign Projects")])),_:1})])),_:2},1032,["to"])])),_:2},1024),(0,o.Wm)(h.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{color:"#ab1e02",onClick:t=>n.deleteEmployee(e.employeeId)},{default:(0,o.w5)((()=>[(0,o.Uk)("DELETE EMPLOYEE")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["title","subtitle"])))),128))])),_:1})),0===i.employeesList.length?((0,o.wg)(),(0,o.iD)("div",Ga," No Data Found ")):(0,o.kq)("",!0)])),_:1}),i.loading?((0,o.wg)(),(0,o.iD)("div",Ya,[(0,o.Wm)(nt.L,{indeterminate:"",color:"primary"})])):(0,o.kq)("",!0)])),_:1})])),_:1})}function Ka(e,t,a,l,i,n){return(0,o.wg)(),(0,o.j4)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Je.B,{modelValue:i.dialog,"onUpdate:modelValue":t[11]||(t[11]=e=>i.dialog=e),persistent:"",width:"1024"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"outlined","prepend-icon":"mdi-plus",color:"primary"},e),{default:(0,o.w5)((()=>[(0,o.Uk)(" New ")])),_:2},1040)])),default:(0,o.w5)((()=>[(0,o.Wm)(he._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Add Employee ")])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q.O,{modelValue:i.form,"onUpdate:modelValue":t[9]||(t[9]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",label:"Employee Name",rules:[i.rules.required],placeholder:"Employee Name",modelValue:i.employeeName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.employeeName=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",label:"Contact Number",type:"number",rules:[i.rules.required],placeholder:"Contact Number",modelValue:i.contactNumber,"onUpdate:modelValue":t[1]||(t[1]=e=>i.contactNumber=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",label:"Personal Main Id",rules:[i.rules.required,i.rules.email],placeholder:"Personal Mail Id",modelValue:i.personalMail,"onUpdate:modelValue":t[2]||(t[2]=e=>i.personalMail=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",label:"Official Mail Id",rules:[i.rules.required,i.rules.email],placeholder:"Official Mail Id",modelValue:i.officialMail,"onUpdate:modelValue":t[3]||(t[3]=e=>i.officialMail=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",rules:[i.rules.required],placeholder:"Date Of Joining",label:"Date of Joining",modelValue:i.doj,"onUpdate:modelValue":t[4]||(t[4]=e=>i.doj=e),type:"date"},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{density:"compact",variant:"outlined",label:"Reporting Manger",items:i.employeesList,"item-value":"employeeId","item-title":"employeeName",rules:[i.rules.required],placeholder:"Reporting Manager",modelValue:i.reportingManagerId,"onUpdate:modelValue":t[5]||(t[5]=e=>i.reportingManagerId=e)},null,8,["items","rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{density:"compact",variant:"outlined",items:i.positionsList,"item-value":"positionId","item-title":"positionName",rules:[i.rules.required],placeholder:"Designation",modelValue:i.positionId,"onUpdate:modelValue":t[6]||(t[6]=e=>i.positionId=e)},null,8,["items","rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{density:"compact",variant:"outlined",items:i.departmentsList,"item-value":"departmentId","item-title":"departmentName",rules:[i.rules.required],placeholder:"Department",modelValue:i.departmentId,"onUpdate:modelValue":t[7]||(t[7]=e=>i.departmentId=e)},null,8,["items","rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{density:"compact",variant:"outlined",label:"Address",placeholder:"Address",modelValue:i.address,"onUpdate:modelValue":t[8]||(t[8]=e=>i.address=e),rules:[i.rules.required]},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.Wm)(p.o)])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),(0,o.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[10]||(t[10]=e=>i.dialog=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),(0,o.Wm)(u.T,{disabled:!i.form,color:"primary",variant:"outlined",onClick:n.onAddEmployee,loading:i.addLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Add ")])),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var Ja={data(){return{dialog:!1,form:!1,employeeName:null,contactNumber:null,personalMail:null,officialMail:null,doj:null,address:null,positionId:null,positionsList:[],departmentId:null,departmentsList:[],reportingManagerId:null,employeesList:[],addLoading:!1,rules:{required(e){return null!==e&&""!==e||"Required"},email(e){return!(!e.includes("@")||!e.includes(".com"))||"Invalid Email Address"}}}},computed:{...(0,m.Se)(["getHeaders"])},methods:{async onAddEmployee(){this.addLoading=!0;const e="http://localhost:8001/employee/create/",t={employeeName:this.employeeName,contactNumber:this.contactNumber,personalMail:this.personalMail,officailMail:this.officialMail,doj:this.doj,positionId:this.positionId,positionsList:[],departmentId:this.departmentId,address:this.address,reportingManagerId:this.reportingManagerId},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},l=await fetch(e,a);if(l.ok){const e=await l.json();console.log(`new employee id : ${e.employeeId}`),this.addLoading=!1,this.dialog=!1,this.employeeName=null,this.contactNumber=null,this.email=null,this.doj=null,this.designation=null,this.department=null,this.address=null,this.$emit("getEmployees")}},async getEmployeesList(){const e="http://localhost:8001/employees/",t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeesList=e}},async getPositionsList(){const e="http://localhost:8001/positions",t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.positionsList=e}},async getDepartementsList(){const e="http://localhost:8001/departments",t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.departmentsList=e}}},created(){this.getEmployeesList(),this.getPositionsList(),this.getDepartementsList()}};const Xa=(0,k.Z)(Ja,[["render",Ka]]);var Qa=Xa,el={data(){return{loading:!0,employeeId:"",employeeName:"",employeesList:[]}},components:{NewEmployeePopup:Qa},computed:{...(0,m.Se)(["getHeaders"])},methods:{onupdateInput(){this.getEmployees()},async getEmployees(){this.loading=!0;const e=`http://localhost:8001/employees?employeeId=${this.employeeId}&&employeeName=${this.employeeName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeesList=e,this.loading=!1,console.log(e)}},async deleteEmployee(e){const t=`http://localhost:8001/employee/delete/${e}`,a={method:"DELETE",...this.getHeaders},l=await fetch(t,a);l.ok&&this.getEmployees()}},mounted(){this.getEmployees()}};const tl=(0,k.Z)(el,[["render",Ba]]);var al=tl;const ll={class:"d-flex flex-row align-center"},ol=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null," Project Id "),(0,o._)("th",null," Project Name "),(0,o._)("th",null," Type "),(0,o._)("th",{class:"text-center"}," Start Date "),(0,o._)("th",{class:"text-center"}," End Date "),(0,o._)("th",{class:"text-center"}," Description "),(0,o._)("th",null," Customer "),(0,o._)("th",{class:"text-center"}," Cost ")])],-1),il={class:"text-center"},nl={class:"text-center"},sl={class:"d-flex flex-row aling-center"},dl={key:0},rl={key:0,style:{"font-size":"12px"}},ml={key:0,class:"d-flex flex-row justify-center align-center"},ul=(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1),cl=[ul];function pl(e,t,a,l,i,n){const s=(0,o.up)("NewProjectPopup"),d=(0,o.up)("CommentPopup"),r=(0,o.up)("DeleteButton");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:i.searchLoading},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Projects")])),_:1})])),_:1}),(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"space-between",align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o._)("div",ll,[(0,o.Wm)(s,{onGetProjectsList:n.getProjectsList},null,8,["onGetProjectsList"])])])),_:1}),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(G.h,{loading:i.searchLoading,density:"compact",variant:"outlined","prepend-icon":"mdi-filter","hide-details":"",placeholder:"Search Project Name",modelValue:i.searchProjectName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchProjectName=e),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.Y,{density:"compact"},{default:(0,o.w5)((()=>[ol,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.projectsList,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,(0,z.zw)(t.projectId),1),(0,o._)("td",null,(0,z.zw)(t.projectName),1),(0,o._)("td",null,(0,z.zw)(t.projectType),1),(0,o._)("td",il,(0,z.zw)(e.getFormatedDateString(t.startDate)),1),(0,o._)("td",nl,(0,z.zw)(e.getFormatedDateString(t.endDate)),1),(0,o._)("td",null,[(0,o.Wm)(d,{comment:t.description},null,8,["comment"])]),(0,o._)("td",null,(0,z.zw)(t.customer),1),(0,o._)("td",null,[(0,o._)("div",null,[(0,o._)("div",sl,[(0,o.Uk)((0,z.zw)(t.cost),1),null!==t.cost?((0,o.wg)(),(0,o.iD)("p",dl,"("+(0,z.zw)(t.currency)+")",1)):(0,o.kq)("",!0)]),"Billable"===t.projectType&&"Time & Material"===t.costType?((0,o.wg)(),(0,o.iD)("div",rl,"Time & Material")):(0,o.kq)("",!0)])]),(0,o._)("td",null,[(0,o.Wm)(r,{onOnRemove:n.onRemove,id:t.projectId},{default:(0,o.w5)((({onOpenDialog:e})=>[(0,o.Wm)(u.T,{icon:"mdi-delete",variant:"text",color:"#a11a1a",onClick:e},null,8,["onClick"])])),_:2},1032,["onOnRemove","id"])])])))),128))])])),_:1})])),_:1}),0===i.projectsList.length?((0,o.wg)(),(0,o.iD)("div",ml,cl)):(0,o.kq)("",!0),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}function hl(e,t,a,l,i,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.WI)(e.$slots,"default",{onOpenDialog:n.onOpenDialog}),(0,o.Wm)(Je.B,{modelValue:i.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dialog=e),width:"300px",persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Are you sure want to remove this project ")])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),(0,o.Wm)(u.T,{text:"Remove",color:"red",onClick:n.onClickRemove},null,8,["onClick"]),(0,o.Wm)(u.T,{text:"Cancel",onClick:n.onCloseDialog},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var wl={data(){return{dialog:!1}},props:["id"],methods:{onOpenDialog(){this.dialog=!0},onCloseDialog(){this.dialog=!1},onClickRemove(){this.dialog=!1,this.$emit("onRemove",this.id)}}};const fl=(0,k.Z)(wl,[["render",hl]]);var gl=fl;function yl(e,t,a,l,i,n){const s=(0,o.up)("DateRange");return(0,o.wg)(),(0,o.j4)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Je.B,{modelValue:i.dialog,"onUpdate:modelValue":t[9]||(t[9]=e=>i.dialog=e),persistent:"",width:"1024"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"outlined","prepend-icon":"mdi-plus",color:"primary"},e),{default:(0,o.w5)((()=>[(0,o.Uk)(" New ")])),_:2},1040)])),default:(0,o.w5)((()=>[(0,o.Wm)(he._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Add Project ")])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q.O,{modelValue:i.form,"onUpdate:modelValue":t[7]||(t[7]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",rules:i.projectNameRules,placeholder:"Select Project Name",modelValue:i.projectName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.projectName=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{density:"compact",variant:"outlined",rules:i.projectTypeRules,placeholder:"Project Type",modelValue:i.projectType,"onUpdate:modelValue":t[1]||(t[1]=e=>i.projectType=e),items:["Billable","Non-Billable"]},null,8,["rules","modelValue"])])),_:1})])),_:1}),"Billable"===i.projectType?((0,o.wg)(),(0,o.j4)(p.o,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{density:"compact",variant:"outlined",items:i.customersList,"item-title":"name","item-value":"customerId",placeholder:"Customers",modelValue:i.customerId,"onUpdate:modelValue":t[2]||(t[2]=e=>i.customerId=e)},null,8,["items","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{density:"compact",variant:"outlined",items:["Fixed Cost","Time & Material"],"item-title":"name","item-value":"customerId",placeholder:"Cost Type",modelValue:i.costType,"onUpdate:modelValue":t[3]||(t[3]=e=>i.costType=e)},null,8,["modelValue"])])),_:1}),"Fixed Cost"===i.costType?((0,o.wg)(),(0,o.j4)(h.D,{key:0,cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",type:"number",rules:i.projectNameRules,placeholder:"cost",modelValue:i.cost,"onUpdate:modelValue":t[4]||(t[4]=e=>i.cost=e)},null,8,["rules","modelValue"])])),_:1})):(0,o.kq)("",!0),"Fixed Cost"===i.costType?((0,o.wg)(),(0,o.j4)(h.D,{key:1,cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{density:"compact",variant:"outlined",rules:i.projectTypeRules,placeholder:"Currency",modelValue:i.currency,"onUpdate:modelValue":t[5]||(t[5]=e=>i.currency=e),items:["USD","Euro","INR","CHF"]},null,8,["rules","modelValue"])])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{density:"compact",variant:"outlined",label:"Description",placeholder:"Description",modelValue:i.description,"onUpdate:modelValue":t[6]||(t[6]=e=>i.description=e),rules:i.projectNameRules},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{onUpdateDateRange:n.updateDateRange},null,8,["onUpdateDateRange"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),(0,o.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[8]||(t[8]=e=>i.dialog=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),(0,o.Wm)(u.T,{disabled:!i.form,color:"primary",variant:"outlined",onClick:n.onAddProject,loading:i.addLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Add ")])),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var _l={data(){return{dialog:!1,form:!1,projectName:null,addLoading:!1,projectNameRules:[e=>null!==e&&""!==e||"Required"],projectType:null,projectTypeRules:[e=>null!==e&&""!==e||"Required"],costType:null,customerId:null,customersList:[],cost:null,currency:null,description:null,startDate:null,endDate:null}},components:{DateRange:Ke},computed:{...(0,m.Se)(["getHeaders"])},methods:{updateDateRange({startDate:e,endDate:t}){this.startDate=(0,$.Z)(e,"yyyy-MM-dd"),this.endDate=(0,$.Z)(t,"yyyy-MM-dd")},async onAddProject(){this.addLoading=!0;const e="http://localhost:8001/project/create/",t={projectName:this.projectName,projectType:this.projectType,customerId:"Billable"===this.projectType?this.customerId:null,costType:"Billable"===this.projectType?this.costType:null,cost:"Fixed Cost"===this.costType&&"Non-Billable"!==this.projectType?this.cost:null,currency:"Fixed Cost"===this.costType&&"Non-Billable"!==this.projectType?this.currency:null,description:this.description,startDate:this.startDate,endDate:this.endDate},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},l=await fetch(e,a);if(l.ok){const e=await l.json();console.log(`new project id : ${e.projectId}`),this.addLoading=!1,this.dialog=!1,this.projectName=null,this.projectType=null,this.customerId=null,this.cost=null,this.currency=null,this.description=null,this.startDate=null,this.endDate=null,this.$emit("getProjectsList")}},async getCustomersList(){const e="http://localhost:8001/customers/",t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.customersList=e}}},created(){this.getCustomersList()}};const kl=(0,k.Z)(_l,[["render",yl]]);var vl=kl,Dl={data(){return{searchProjectName:"",searchLoading:!1,projectsList:""}},components:{CommentPopup:Et,DeleteButton:gl,NewProjectPopup:vl},computed:{...(0,m.Se)(["getFormatedDateString","getHeaders"])},methods:{onupdateInput(){this.getProjectsList()},async getProjectsList(){this.searchLoading=!0;const e=`http://localhost:8001/projects?projectName=${this.searchProjectName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.projectsList=e,this.searchLoading=!1}},async onRemove(e){console.log("project delete"),console.log(e);const t=`http://localhost:8001/project/delete/${e}`,a={method:"DELETE",...this.getHeaders},l=await fetch(t,a);if(l.ok){const e=await l.json();console.log(e.message),this.getProjectsList()}}},mounted(){this.getProjectsList()}};const jl=(0,k.Z)(Dl,[["render",pl]]);var Wl=jl;const bl={class:"d-flex flex-row align-center"},Sl=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null," Id "),(0,o._)("th",null," Name "),(0,o._)("th",null," Email "),(0,o._)("th",null," Contact Person "),(0,o._)("th",null," Contact No "),(0,o._)("th",{class:"text-center"}," Address ")])],-1),Cl={key:0,class:"d-flex flex-row justify-center align-center"},Il=(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1),Vl=[Il];function xl(e,t,a,l,i,n){const s=(0,o.up)("NewCustomerPopup"),d=(0,o.up)("CommentPopup"),r=(0,o.up)("DeleteButton");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:i.searchLoading},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Customers")])),_:1})])),_:1}),(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"space-between",align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o._)("div",bl,[(0,o.Wm)(s,{onGetCustomersList:n.getCustomersList},null,8,["onGetCustomersList"])])])),_:1}),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(G.h,{loading:i.searchLoading,density:"compact",variant:"outlined","prepend-icon":"mdi-filter","hide-details":"",placeholder:"Search Customer",modelValue:i.searchCustomer,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchCustomer=e),onInput:n.onupdateInput},null,8,["loading","modelValue","onInput"])])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.Y,{density:"compact"},{default:(0,o.w5)((()=>[Sl,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.customersList,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("td",null,(0,z.zw)(e.customerId),1),(0,o._)("td",null,(0,z.zw)(e.name),1),(0,o._)("td",null,(0,z.zw)(e.email),1),(0,o._)("td",null,(0,z.zw)(e.contactPerson),1),(0,o._)("td",null,(0,z.zw)(e.contactNumber),1),(0,o._)("td",null,[(0,o.Wm)(d,{comment:e.address},null,8,["comment"])]),(0,o._)("td",null,[(0,o.Wm)(r,{onOnRemove:n.onRemove,id:e.customerId},{default:(0,o.w5)((({onOpenDialog:e})=>[(0,o.Wm)(u.T,{icon:"mdi-delete",variant:"text",color:"#a11a1a",onClick:e},null,8,["onClick"])])),_:2},1032,["onOnRemove","id"])])])))),128))])])),_:1})])),_:1}),0===i.customersList.length?((0,o.wg)(),(0,o.iD)("div",Cl,Vl)):(0,o.kq)("",!0),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}function Tl(e,t,a,l,i,n){return(0,o.wg)(),(0,o.j4)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Je.B,{modelValue:i.dialog,"onUpdate:modelValue":t[7]||(t[7]=e=>i.dialog=e),persistent:"",width:"1024"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"outlined","prepend-icon":"mdi-plus",color:"primary"},e),{default:(0,o.w5)((()=>[(0,o.Uk)(" New ")])),_:2},1040)])),default:(0,o.w5)((()=>[(0,o.Wm)(he._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Add Customer ")])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q.O,{modelValue:i.form,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",label:"Customer",rules:[i.rules.required],placeholder:"Customer",modelValue:i.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.name=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",label:"Contact Person",rules:[i.rules.required],placeholder:"Contact Person",modelValue:i.contactPerson,"onUpdate:modelValue":t[1]||(t[1]=e=>i.contactPerson=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",label:"Contact Number",type:"number",rules:[i.rules.required],placeholder:"Contact Number",modelValue:i.number,"onUpdate:modelValue":t[2]||(t[2]=e=>i.number=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",label:"Email",rules:[i.rules.required,i.rules.email],placeholder:"Email",modelValue:i.email,"onUpdate:modelValue":t[3]||(t[3]=e=>i.email=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{density:"compact",variant:"outlined",label:"Address",placeholder:"Address",modelValue:i.address,"onUpdate:modelValue":t[4]||(t[4]=e=>i.address=e),rules:[i.rules.required]},null,8,["modelValue","rules"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),(0,o.Wm)(u.T,{color:"blue-darken-1",variant:"text",onClick:t[6]||(t[6]=e=>i.dialog=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),(0,o.Wm)(u.T,{disabled:!i.form,color:"primary",variant:"outlined",onClick:n.onAddCustomer,loading:i.addLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Add ")])),_:1},8,["disabled","onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var Pl={data(){return{dialog:!1,form:!1,name:null,number:null,email:null,contactPerson:null,addLoading:!1,rules:{required(e){return null!==e&&""!==e||"Required"},email(e){return!(!e.includes("@")||!e.includes(".com"))||"Invalid Email Address"}},address:null}},computed:{...(0,m.Se)(["getHeaders"])},methods:{async onAddCustomer(){this.addLoading=!0;const e="http://localhost:8001/customer/create/",t={name:this.name,contactPerson:this.contactPerson,contactNumber:this.number,email:this.email,address:this.address},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},l=await fetch(e,a);if(l.ok){const e=await l.json();console.log(`new customer id : ${e.customerId}`),this.addLoading=!1,this.$emit("getCustomersList"),this.dialog=!1}}}};const Ll=(0,k.Z)(Pl,[["render",Tl]]);var El=Ll,Nl={data(){return{searchCustomer:"",searchLoading:!1,customersList:""}},components:{CommentPopup:Et,DeleteButton:gl,NewCustomerPopup:El},computed:{...(0,m.Se)(["getFormatedDateString","getHeaders"])},methods:{onupdateInput(){this.getCustomersList()},async getCustomersList(){this.searchLoading=!0;const e=`http://localhost:8001/customers?name=${this.searchCustomer}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.customersList=e,this.searchLoading=!1}},async onRemove(e){const t=`http://localhost:8001/customer/delete/${e}`,a={method:"DELETE",...this.getHeaders},l=await fetch(t,a);if(l.ok){const e=await l.json();console.log(e.message),this.getCustomersList()}}},mounted(){this.getCustomersList()}};const Ol=(0,k.Z)(Nl,[["render",xl]]);var Rl=Ol;const Ul=e=>((0,o.dD)("data-v-4655a186"),e=e(),(0,o.Cn)(),e),$l={class:"w-100 d-flex flex-row justify-space-between"},Ml=Ul((()=>(0,o._)("span",{class:"text-h5"},"TimeSheet",-1))),Hl={key:0,class:"w-100 mt-5"},Al={key:0,class:"create-sheet-card d-flex flex-row align-center justify-center"};function zl(e,t,a,i,n,s){const d=(0,o.up)("TimesheetStatus"),r=(0,o.up)("EditableTable"),m=(0,o.up)("NonEditableTable");return(0,o.wg)(),(0,o.j4)(he._,{width:"1080","max-height":"600",variant:"elevated",elevation:"10"},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Submit Timesheet")])),_:1})])),_:1}),(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o._)("div",$l,[Ml,void 0!==e.timeSheetObj?((0,o.wg)(),(0,o.j4)(d,{key:0,status:e.timeSheetObj.status},null,8,["status"])):(0,o.kq)("",!0),(0,o.wy)((0,o._)("input",{class:"week-calendar-input",type:"week","onUpdate:modelValue":t[0]||(t[0]=t=>e.calendarValue=t),onChange:t[1]||(t[1]=(...e)=>s.onChangeWeek&&s.onChangeWeek(...e))},null,544),[[l.nr,e.calendarValue]])]),void 0!==e.timeSheetObj&&"denied"===e.timeSheetObj.status?((0,o.wg)(),(0,o.iD)("div",Hl,[(0,o.Wm)(u.T,{color:"#a83299",loading:e.createSheetLoading,onClick:s.onClickReCreate},{default:(0,o.w5)((()=>[(0,o.Uk)(" Re-create Sheet ")])),_:1},8,["loading","onClick"])])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[void 0===e.timeSheetObj?((0,o.wg)(),(0,o.iD)("div",Al,[(0,o.Wm)(u.T,{color:"#a83299",onClick:s.createSheet,loading:e.createSheetLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Create Sheet ")])),_:1},8,["onClick","loading"])])):"open"===e.timeSheetObj.status?((0,o.wg)(),(0,o.j4)(r,{key:1,timeSheetObj:e.timeSheetObj,onGetTimeSheet:s.getTimeSheet},null,8,["timeSheetObj","onGetTimeSheet"])):((0,o.wg)(),(0,o.j4)(m,{key:2,timeSheetObj:e.timeSheetObj},null,8,["timeSheetObj"]))])])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C)])),_:1})])),_:1})}const ql=e=>((0,o.dD)("data-v-9c1e6468"),e=e(),(0,o.Cn)(),e),Zl={class:"w-100 d-flex flex-row align-center justify-end"},Fl={class:"d-flex flex-row justify-space-between"},Gl={class:"text-h7"},Yl={class:"text-h9"},Bl=ql((()=>(0,o._)("th",{class:"text-left",width:"250px"}," Projects ",-1))),Kl=ql((()=>(0,o._)("th",{style:{"font-size":"14px","font-weight":"bold",color:"black"}}," Total: ",-1))),Jl={class:"text-center pa-1",style:{width:"95px"}},Xl={class:"text-center pa-1",style:{width:"95px"}},Ql={class:"text-center pa-1",style:{width:"95px"}},eo={class:"text-center pa-1",style:{width:"95px"}},to={class:"text-center pa-1",style:{width:"95px"}},ao={class:"text-center pa-1",style:{width:"95px"}},lo={class:"text-center pa-1",style:{width:"95px"}},oo={class:"text-center"},io={class:"pa-0"},no=ql((()=>(0,o._)("td",null,[(0,o._)("p",null," Total : ")],-1))),so={key:0,class:"error-message error"},ro={class:"text-center"},mo={key:0,class:"error-message error"},uo={class:"mt-4 d-flex flex-row align-center justify-space-between"},co=ql((()=>(0,o._)("div",null,[(0,o._)("p",{class:"error-message"},"*Maxmium 8 hours per day allowed"),(0,o._)("p",{class:"error-message"},"*40 hours per week allowed")],-1)));function po(e,t,a,l,i,n){const s=(0,o.up)("ReviewTable"),d=(0,o.up)("InputField");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",Zl,[!i.isSaved&&!n.isMoreEightHours&&n.getTotal<=40?((0,o.wg)(),(0,o.j4)(u.T,{key:0,color:"primary",class:"mr-2",onClick:n.onClickSave,loading:i.saveLodaing,disabled:!i.form},{default:(0,o.w5)((()=>[(0,o.Uk)(" Save ")])),_:1},8,["onClick","loading","disabled"])):(0,o.kq)("",!0),(0,o.Wm)(Je.B,{modelValue:i.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dialog=e),persistent:"",width:"auto"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"outlined",color:"#b93bd9"},e,{disabled:!i.isSaved||n.isMoreEightHours||n.getTotal<40||n.getTotal>40||n.isTimeSheetValid||!i.form}),{default:(0,o.w5)((()=>[(0,o.Uk)(" Review and Submit ")])),_:2},1040,["disabled"])])),default:(0,o.w5)((()=>[(0,o.Wm)(he._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(we.E,{class:"text-h5"},{default:(0,o.w5)((()=>[(0,o._)("div",Fl,[(0,o._)("span",Gl,"TimeSheet ID : "+(0,z.zw)(i.sheetObj.timeSheetId),1),(0,o._)("span",Yl,"Employee ID: "+(0,z.zw)(e.employeeId),1)])])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{weekData:i.timeSheetList},null,8,["weekData"])])),_:1}),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),(0,o.Wm)(u.T,{variant:"text",onClick:t[0]||(t[0]=e=>i.dialog=!1),color:"#454df5"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Cancel ")])),_:1}),(0,o.Wm)(u.T,{variant:"outlined",color:"#b93bd9",loading:i.submitLoading,onClick:n.onClickSubmit},{default:(0,o.w5)((()=>[(0,o.Uk)(" Submit ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,o.Wm)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q.O,{modelValue:i.form,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.Y,{height:"400px"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[Bl,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.daysOfWeek,(e=>((0,o.wg)(),(0,o.iD)("th",{style:{"font-size":"13px"},class:"text-left",key:e},(0,z.zw)(e),1)))),128)),Kl])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.timeSheetList,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("td",null,[(0,o._)("div",null,[(0,o.Wm)(_e.rL,{class:"mt-6",label:"Select Project",items:i.localProjectsList,variant:"outlined","model-value":e.projectName,rules:i.projectSelectRules,"onUpdate:modelValue":t=>n.setProjectValue(t,{rowId:e.id,name:"projectName"})},null,8,["items","model-value","rules","onUpdate:modelValue"])])]),(0,o._)("td",Jl,[(0,o.Wm)(d,{comment:e.mondayComment,obj:{rowId:e.id,name:"mondayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"monday"}),"model-value":e.monday,type:"number","v-model":e.monday,"append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","v-model","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",Xl,[(0,o.Wm)(d,{comment:e.tuesdayComment,obj:{rowId:e.id,name:"tuesdayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"tuesday"}),"model-value":e.tuesday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",Ql,[(0,o.Wm)(d,{comment:e.wednesdayComment,obj:{rowId:e.id,name:"wednesdayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"wednesday"}),"model-value":e.wednesday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",eo,[(0,o.Wm)(d,{comment:e.thursdayComment,obj:{rowId:e.id,name:"thursdayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"thursday"}),"model-value":e.thursday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",to,[(0,o.Wm)(d,{comment:e.fridayComment,obj:{rowId:e.id,name:"fridayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"friday"}),"model-value":e.friday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",ao,[(0,o.Wm)(d,{comment:e.satuardayComment,obj:{rowId:e.id,name:"satuardayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"satuarday"}),"model-value":e.satuarday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",lo,[(0,o.Wm)(d,{comment:e.sundayComment,obj:{rowId:e.id,name:"sundayComment"},onSetRowValue:n.setRowValue},{default:(0,o.w5)((({isHovered:t,onClickIcon:a})=>[(0,o.Wm)(G.h,{variant:"outlined",density:"comfortable","hide-details":"",onInput:t=>n.restrictChar(t,{rowId:e.id,name:"sunday"}),"model-value":e.sunday,type:"number","append-inner-icon":t?"mdi-comment":"","onClick:appendInner":a},null,8,["onInput","model-value","append-inner-icon","onClick:appendInner"])])),_:2},1032,["comment","obj","onSetRowValue"])]),(0,o._)("td",oo,[(0,o._)("p",null,(0,z.zw)(n.totalHoursOnProject(e)),1)]),(0,o._)("td",io,[(0,o.Wm)(u.T,{icon:"mdi-close",variant:"text",size:"small",onClick:t=>n.onClickDelete(e.id)},null,8,["onClick"])])])))),128)),(0,o._)("tr",null,[no,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.daysList,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"text-center",key:e},[(0,o._)("div",null,[(0,o._)("p",{class:(0,z.C_)(n.getTotalHoursOfDay(e)>8?"error":"")},(0,z.zw)(n.getTotalHoursOfDay(e)),3),n.getTotalHoursOfDay(e)>8?((0,o.wg)(),(0,o.iD)("p",so,"8 Hours allowed")):(0,o.kq)("",!0)])])))),128)),(0,o._)("td",ro,[(0,o._)("p",{class:(0,z.C_)(n.getTotal>40?"error":"")},(0,z.zw)(n.getTotal),3),n.getTotal>40?((0,o.wg)(),(0,o.iD)("p",mo,"40HRS allowed")):(0,o.kq)("",!0)])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o._)("div",uo,[i.timeSheetList.length<e.projectList.length?((0,o.wg)(),(0,o.j4)(u.T,{key:0,color:"#0047ba","prepend-icon":"mdi-plus",onClick:n.addNewRow},{default:(0,o.w5)((()=>[(0,o.Uk)(" New Row ")])),_:1},8,["onClick"])):(0,o.kq)("",!0),co])])),_:1})])}var ho=a(3029);const wo=(0,o._)("th",{class:"text-left",width:"250px"}," Projects ",-1),fo=(0,o._)("th",{style:{"font-size":"14px","font-weight":"bold",color:"black"}}," Total: ",-1),go={class:"mt-6 mb-6 font-weight-medium"},yo={class:"text-center"},_o={class:"text-center"},ko={class:"text-center"},vo={class:"text-center"},Do={class:"text-center"},jo={class:"text-center"},Wo={class:"text-center"},bo={class:"text-center"},So=(0,o._)("td",null,[(0,o._)("p",null," Total : ")],-1),Co={class:"text-center"},Io={class:"text-center"},Vo={class:"text-center"},xo={class:"text-center"},To={class:"text-center"},Po={class:"text-center"},Lo={class:"text-center"},Eo={class:"text-center"};function No(e,t,a,l,i,n){const s=(0,o.up)("CommentPopup");return(0,o.wg)(),(0,o.j4)(c.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.Y,null,{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[wo,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.daysOfWeek,(e=>((0,o.wg)(),(0,o.iD)("th",{style:{"font-size":"13px"},class:"text-left",key:e},(0,z.zw)(e),1)))),128)),fo])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.timeSheetList,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,[(0,o._)("div",go,[(0,o._)("p",null,(0,z.zw)(n.getProjectName(e.projectId)),1)])]),(0,o._)("td",yo,[(0,o.Wm)(s,{comment:e.mondayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.monday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",_o,[(0,o.Wm)(s,{comment:e.tuesdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.tuesday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",ko,[(0,o.Wm)(s,{comment:e.wednesdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.wednesday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",vo,[(0,o.Wm)(s,{comment:e.thursdayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.thursday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",Do,[(0,o.Wm)(s,{comment:e.fridayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.friday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",jo,[(0,o.Wm)(s,{comment:e.satuardayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.satuarday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",Wo,[(0,o.Wm)(s,{comment:e.sundayComment},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,z.zw)(n.checkAndGetValue(e.sunday)),1)])),_:2},1032,["comment"])]),(0,o._)("td",bo,[(0,o._)("p",null,(0,z.zw)(n.totalHoursOnProject(e)),1)])])))),128)),(0,o._)("tr",null,[So,(0,o._)("td",Co,(0,z.zw)(n.getTotalHoursOfDay("monday")),1),(0,o._)("td",Io,(0,z.zw)(n.getTotalHoursOfDay("tuesday")),1),(0,o._)("td",Vo,(0,z.zw)(n.getTotalHoursOfDay("wednesday")),1),(0,o._)("td",xo,(0,z.zw)(n.getTotalHoursOfDay("thursday")),1),(0,o._)("td",To,(0,z.zw)(n.getTotalHoursOfDay("friday")),1),(0,o._)("td",Po,(0,z.zw)(n.getTotalHoursOfDay("satuarday")),1),(0,o._)("td",Lo,(0,z.zw)(n.getTotalHoursOfDay("sunday")),1),(0,o._)("td",Eo,(0,z.zw)(n.getTotal),1)])])])),_:1})])),_:1})])),_:1})}var Oo={data(){return{timeSheetList:this.weekData}},props:["weekData"],components:{CommentPopup:Et},watch:{weekData(e){this.timeSheetList=e}},computed:{...(0,m.rn)(["projectList"]),getTotal(){const e=this.timeSheetList;let t=0;return e.forEach((e=>{t+=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday})),t.toFixed(1)}},methods:{getTotalHoursOfDay(e){const t=this.timeSheetList;let a=0;return t.forEach((t=>{a+=t[e]})),a.toFixed(1)},totalHoursOnProject(e){const t=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday;return t.toFixed(1)},getProjectName(e){const t=this.projectList.find((t=>t.projectId===e));return t.projectName},checkAndGetValue(e){return 0===e?null:e}}};const Ro=(0,k.Z)(Oo,[["render",No]]);var Uo=Ro;function $o(e,t,a,l,i,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(he._,{onMouseenter:n.onHover,onMouseleave:n.offHover},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{isHovered:i.isHovered,onClickIcon:n.onClickIcon})])),_:3},8,["onMouseenter","onMouseleave"]),(0,o.Wm)(Je.B,{width:"500",modelValue:i.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dialog=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{title:"Add Comment"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ut.z,{variant:"outlined",modelValue:i.newComment,"onUpdate:modelValue":t[0]||(t[0]=e=>i.newComment=e)},null,8,["modelValue"]),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C),(0,o.Wm)(u.T,{text:"Save Changes",onClick:n.onSaveClicked,color:"#4287f5"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var Mo={data(){return{isHovered:!1,dialog:!1,newComment:this.comment}},props:["comment","obj"],watch:{comment(e){this.newComment=e,console.log(e),console.log(this.newComment)}},methods:{onHover(){this.isHovered=!0},offHover(){this.isHovered=!1},onClickIcon(){this.dialog=!0},onSaveClicked(){this.dialog=!1,this.$emit("setRowValue",this.newComment,this.obj)}}};const Ho=(0,k.Z)(Mo,[["render",$o]]);var Ao=Ho,zo={data(){return{form:!0,isHovering:!1,dialog:!1,sheetObj:this.timeSheetObj,saveLodaing:!1,isSaved:!0,timeSheetList:[],localProjectsList:[],submitLoading:!1,daysList:["monday","tuesday","wednesday","thursday","friday","satuarday","sunday"],projectSelectRules:[e=>{const t=this.projectList.find((t=>t.projectName===e));return void 0===t?"Select Project":t.startDate>this.endDate?"Project Not yet Started":!(t.endDate<this.startDate)||"Project Deadline Exceeded"}]}},props:["timeSheetObj"],watch:{timeSheetObj(e){this.sheetObj=e,this.getTimeSheetData()},timeSheetList(){this.updateLocalProjectList()}},components:{ReviewTable:Uo,InputField:Ao},computed:{...(0,m.rn)(["employeeId","employeeName","selectedWeek","projectList","startDate","endDate"]),...(0,m.Se)(["getHeaders"]),getTotal(){const e=this.timeSheetList;let t=0;return e.forEach((e=>{t+=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday})),t.toFixed(1)},isMoreEightHours(){for(let e of this.daysList)if(this.getTotalHoursOfDay(e)>8)return!0;return!1},isTimeSheetValid(){return!(this.timeSheetList.length>0)||null===this.timeSheetList[0].projectId}},methods:{restrictChar(e,t){let a=e.target.value;(parseFloat(a)>8||parseFloat(a)<0)&&(e.target.value=null,a=null),a=isNaN(parseFloat(a))?null:parseFloat(parseFloat(a).toFixed(1)),this.setRowValue(a,t)},isTotalMoreThanEight(e,t){const{rowId:a,name:l}=t,o=this.timeSheetList.map((t=>{if(t.id===a){const a={...t};return a[l]=e,a}return{...t}}));let i=0;return o.forEach((e=>{i+=e[l]})),i>8},getTotalHoursOfDay(e){const t=this.timeSheetList;let a=0;return t.forEach((t=>{a+=t[e]})),a.toFixed(1)},addNewRow(){const e={id:(0,ho.Z)(),projectId:null,projectName:null,monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,satuarday:null,sunday:null,total:null,mondayComment:null,tuesdayComment:null,wednesdayComment:null,thursdayComment:null,fridayComment:null,satuardayComment:null,sundayComment:null};this.timeSheetList=[...this.timeSheetList,e]},setProjectValue(e,t){const a=this.projectList.find((t=>t.projectName===e));this.setRowValue(a.projectId,{...t,name:"projectId"}),this.setRowValue(a.projectName,t),this.updateLocalProjectList()},setRowValue(e,t){const{rowId:a,name:l}=t,o=this.timeSheetList.find((e=>e.id===a));o&&(o[l]=e),this.isSaved=!1},updateLocalProjectList(){const e=this.projectList.filter((e=>{const t=this.timeSheetList.every((t=>t.projectId!==e.projectId));return t}));this.localProjectsList=e.map((e=>e.projectName))},totalHoursOnProject(e){const t=e.monday+e.tuesday+e.wednesday+e.thursday+e.friday+e.satuarday+e.sunday;return t.toFixed(1)},onClickDelete(e){this.isSaved=!1;const t=this.timeSheetList.filter((t=>t.id!==e));this.timeSheetList=t},async getProjectData(){await this.$store.dispatch("getProjectData"),this.localProjectsList=this.projectList.map((e=>e.projectName))},async getTimeSheetData(){const e=`http://localhost:8001/timesheet/projects/${this.sheetObj.timeSheetId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.timeSheetList=e,0===this.timeSheetList.length&&this.addNewRow()}},async onClickSave(){this.saveLodaing=!0;const e=`http://localhost:8001/timesheet/save/${this.sheetObj.timeSheetId}`,t={method:"PUT",...this.getHeaders,body:JSON.stringify({arr:this.timeSheetList})},a=await fetch(e,t);if(a.ok){const e=await a.json();console.log(e.text)}this.saveLodaing=!1,this.isSaved=!0},async onClickSubmit(){this.submitLoading=!0,await this.$store.dispatch("submitTimeSheet",this.sheetObj.timeSheetId),await this.$store.dispatch("sendEmail",{timeSheetId:this.sheetObj.timeSheetId,startDate:this.sheetObj.startDate,endDate:this.sheetObj.endDate}),this.dialog=!1,this.submitLoading=!1,this.$emit("getTimeSheet")}},created(){this.getProjectData(),this.getTimeSheetData()}};const qo=(0,k.Z)(zo,[["render",po],["__scopeId","data-v-9c1e6468"]]);var Zo=qo,Fo=a(3841),Go={name:"TimeSheet",data:()=>({createSheetLoading:!1,calendarValue:"",timeSheetObj:void 0}),components:{EditableTable:Zo,NonEditableTable:Rt,TimesheetStatus:Jt},computed:{...(0,m.rn)(["startDate","endDate","employeeId"]),...(0,m.Se)(["getHeaders"]),checkWeekDataExist(){return this.$store.getters.isWeekDataExist}},methods:{onChangeWeek(){""!==this.calendarValue&&(this.$store.dispatch("updateSelectedWeek",this.calendarValue),this.getTimeSheet())},async getTimeSheet(){const e=`http://localhost:8001/timesheet/employee/${this.employeeId}?start_date=${this.startDate}&&end_date=${this.endDate}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.timeSheetObj=e.data}},async createSheet(){this.createSheetLoading=!0;const e="http://localhost:8001/timesheet/create",t={employeeId:this.employeeId,week:this.calendarValue,startDate:this.startDate,endDate:this.endDate},a={method:"POST",...this.getHeaders,body:JSON.stringify(t)},l=await fetch(e,a);if(l.ok){const e=await l.json();console.log(e.timeSheetId),this.timeSheetObj={timeSheetId:e.timeSheetId,week:this.calendarValue,status:"open"}}this.createSheetLoading=!1},async onClickReCreate(){this.createSheetLoading=!0;const e=`http://localhost:8001/timesheet/recreate/${this.timeSheetObj.timeSheetId}`,t=await fetch(e,{method:"POST",...this.getHeaders});if(t.ok){const e=await t.json();console.log(e.message),this.getTimeSheet()}this.createSheetLoading=!1}},created(){if(void 0!==this.$route.query.calendarValue)this.calendarValue=this.$route.query.calendarValue;else{const e=new Date,t=`${e.getFullYear()}-W${(0,Fo.Z)(e,{weekStartsOn:1,firstWeekContainsDate:2})}`;this.calendarValue=t}this.$store.dispatch("updateSelectedWeek",this.calendarValue)},mounted(){this.getTimeSheet(),this.$store.commit("updateDaysOfWeek")}};const Yo=(0,k.Z)(Go,[["render",zl],["__scopeId","data-v-4655a186"]]);var Bo=Yo;const Ko=e=>((0,o.dD)("data-v-4e8f99d0"),e=e(),(0,o.Cn)(),e),Jo={class:"d-flex flex-row align-center"},Xo={class:"d-flex flex-row align-center"},Qo=Ko((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-left"}," Timesheet Id "),(0,o._)("th",{class:"text-left"}," Employee Id "),(0,o._)("th",{class:"text-left"}," employee Name "),(0,o._)("th",{class:"text-center"}," Week "),(0,o._)("th",{class:"text-center"}," Log Hours "),(0,o._)("th",{class:"text-center"}," Status ")])],-1))),ei={class:"text-center"},ti={class:"text-center"},ai={key:0,class:"d-flex flex-row justify-center align-center"},li=Ko((()=>(0,o._)("p",{class:"font-weight-medium"},"No Data Available",-1))),oi=[li];function ii(e,t,a,l,i,n){const s=(0,o.up)("DateRange"),d=(0,o.up)("WeekSheet"),r=(0,o.up)("TimesheetStatus");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"w-100 h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{width:"100%",height:"100%",variant:"elevated",elevation:"10",loading:e.loading},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"50"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Review TimeSheet")])),_:1})])),_:1}),(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{align:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",Jo,[(0,o.Wm)(_e.rL,{items:e.timePeriodOptions,"item-title":"title","item-value":"value",density:"compact",label:"Select a Time Period","hide-details":"",modelValue:e.timePeriod,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.timePeriod=t),n.onupdateInput]},null,8,["items","modelValue","onUpdate:modelValue"])])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",placeholder:"Employee Id",type:"number","hide-details":"",modelValue:e.searchEmployeeId,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.searchEmployeeId=t),n.onupdateInput]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"12",md:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",placeholder:"Employee Name",type:"number","hide-details":"",modelValue:e.searchEmployeeId,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.searchEmployeeId=t),n.onupdateInput]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),"customDate"===e.timePeriod?((0,o.wg)(),(0,o.j4)(h.D,{key:0,cols:"12",md:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",Xo,[(0,o.Wm)(s,{onUpdateDateRange:n.updateDateRange},null,8,["onUpdateDateRange"]),(0,o.Wm)(u.T,{variant:"text",icon:"mdi mdi-magnify",class:"mt-7",onClick:n.onupdateInput},null,8,["onClick"])])])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ke.Y,{density:"compact"},{default:(0,o.w5)((()=>[Qo,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.timeSheets,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.name},[(0,o._)("td",null,(0,z.zw)(e.timeSheetId),1),(0,o._)("td",null,(0,z.zw)(e.employeeId),1),(0,o._)("td",null,(0,z.zw)(e.employeeName),1),(0,o._)("td",null,[(0,o.Wm)(d,{title:e.week,timeSheet:e,onGetTimeSheets:n.getTimeSheets},null,8,["title","timeSheet","onGetTimeSheets"])]),(0,o._)("td",ei,(0,z.zw)(e.logHours),1),(0,o._)("td",ti,[(0,o.Wm)(r,{status:e.status},null,8,["status"])])])))),128))])])),_:1})])),_:1}),0===e.timeSheets.length?((0,o.wg)(),(0,o.iD)("div",ai,oi)):(0,o.kq)("",!0),(0,o.Wm)(ge.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ye.C)])),_:1})])),_:1},8,["loading"])])),_:1})}var ni={name:"TimeSheet",data:()=>({dialog:!1,loading:!1,status:"",searchEmployeeId:"",searchEmployeeName:"",dateRange:{startDate:new Date,endDate:new Date},statusOptions:[{title:"All",value:""},{title:"Open",value:"open"},{title:"Submited",value:"submited"},{title:"Approved",value:"approved"},{title:"Denied",value:"denied"}],timePeriodOptions:[{value:"month1",title:"Last 1 Month"},{value:"month3",title:"Last 3 Months"},{value:"month6",title:"Last 6 Months"},{value:"lastYear",title:"Previous Year"},{value:"currentYear",title:"Current Year"},{value:"customDate",title:"Custom Date"}],timePeriod:null,timeSheets:[]}),components:{DateRange:Ke,WeekSheet:Ft,TimesheetStatus:Jt},computed:{...(0,m.rn)(["employeeId"]),...(0,m.Se)(["getHeaders"])},methods:{onupdateInput(){this.getTimeSheets()},getStartAndEndDate(){const e=new Date;let t=null,a=e;switch(this.timePeriod){case"month1":t=(0,$e.Z)(e,30);break;case"month3":t=(0,$e.Z)(e,90);break;case"month6":t=(0,$e.Z)(e,180);break;case"lastYear":t=(0,Me.Z)(new Date(e.getFullYear(),0,1),1),a=(0,Me.Z)(new Date(e.getFullYear(),11,31),1);break;case"currentYear":t=new Date(e.getFullYear(),0,1);break;case"customDate":t=this.dateRange.startDate,a=this.dateRange.endDate;break;default:t=new Date(e.getFullYear(),0,1);break}return{startDate:(0,$.Z)(t,"yyyy-MM-dd"),endDate:(0,$.Z)(a,"yyyy-MM-dd")}},async getTimeSheets(){this.loading=!0;const{startDate:e,endDate:t}=this.getStartAndEndDate(),a=`http://localhost:8001/reporting_manager/employees/pending_timesheets/${this.employeeId}?employee_id=${this.searchEmployeeId}&&employee_name=${this.searchEmployeeName}&&start_date=${e}&&end_date=${t}&&status=${this.status}`,l={method:"GET",...this.getHeaders},o=await fetch(a,l);if(o.ok){const e=await o.json();this.timeSheets=e,console.log(this.timeSheets)}this.loading=!1},updateDateRange(e){this.dateRange=e}},mounted(){this.getTimeSheets()}};const si=(0,k.Z)(ni,[["render",ii],["__scopeId","data-v-4e8f99d0"]]);var di=si,ri=a(4108),mi=a(3446),ui=a(4580),ci=a(6191),pi=a(1615);const hi={class:"font-weight-medium text-uppercase"},wi={class:"font-weight-medium text-uppercase"},fi={class:"text-subtitle-2 font-weight-light"},gi={key:0,class:"d-flex justify-center text-subtitle-1"},yi={key:0,class:"d-flex justify-center text-subtitle-1"},_i={key:1,style:{height:"400px",width:"100%"},class:"d-flex flex-row align-center justify-center"};function ki(e,t,a,l,i,n){const s=(0,o.up)("ProjectAssignmentExpansion");return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"h-100 w-100"},{default:(0,o.w5)((()=>[i.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(F.C,{key:0,variant:"elevated"},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{height:"50",theme:"dark",color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("PROJECT ASSIGNMENT")])),_:1}),(0,o.Wm)(pi.l)])),_:1}),(0,o.Wm)(c.K,{fluid:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",hi,(0,z.zw)(`Employee id : ${i.employeeObj.employeeId}`),1),(0,o._)("div",wi,(0,z.zw)(`Name : ${i.employeeObj.employeeName}`),1),(0,o._)("div",null,(0,z.zw)(`Email : ${i.employeeObj.employeeEmail}`),1),(0,o._)("div",fi,(0,z.zw)(`Position :${i.employeeObj.position}`),1)])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#6a70eb",height:"40"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Projects List")])),_:1})])),_:1}),(0,o.Wm)(he._,{height:"500",class:"overflow-y-auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{variant:"outlined",placeholder:"Search Project",onInput:n.onSearchProjects,modelValue:i.searchProjectName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchProjectName=e)},null,8,["onInput","modelValue"])])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ri.Vc,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.distinctProjectsList,(e=>((0,o.wg)(),(0,o.j4)(mi.M,{key:e.projectId,title:e.projectName},{default:(0,o.w5)((()=>[(0,o.Wm)(ui.H,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{projectData:{projectId:e.projectId,projectType:e.projectType,startDate:null,endDate:null,roleId:null}},{default:(0,o.w5)((({form:e,projectDetails:t})=>[(0,o.Wm)(p.o,{justify:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"2",class:"mt-1"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{disabled:!e,onClick:e=>n.onClickAddProject(t),color:"primary",loading:i.addLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Add ")])),_:2},1032,["disabled","onClick","loading"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["projectData"])])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1}),0===n.distinctProjectsList.length?((0,o.wg)(),(0,o.iD)("div",gi," No Projects Available ")):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{dark:"",color:"#95d3f0",height:"40"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Assigned Projects")])),_:1})])),_:1}),(0,o.Wm)(he._,{height:"500",class:"overflow-y-auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(ri.Vc,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.employeeProjectsList,(e=>((0,o.wg)(),(0,o.j4)(mi.M,{key:e.projectId},{default:(0,o.w5)((()=>[(0,o.Wm)(ci.V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{"no-gutters":"",justify:"space-between"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,z.zw)(e.projectName),1)])),_:2},1024),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",{style:(0,z.j5)({color:n.getProjectStatusColor(e)})},(0,z.zw)(n.getProjectStatus(e)),5)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,o.Wm)(ui.H,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{projectData:e},{default:(0,o.w5)((({form:t,projectDetails:a})=>[(0,o.Wm)(p.o,{justify:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{disabled:!t,color:"primary",variant:"outlined",onClick:e=>n.onClickUpdateProject(a),loading:i.updateLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Update ")])),_:2},1032,["disabled","onClick","loading"])])),_:2},1024),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{color:"red",variant:"outlined",onClick:t=>n.onClickRemoveProject(e.projectId),loading:i.removeLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Remove ")])),_:2},1032,["onClick","loading"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["projectData"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),0===i.employeeProjectsList.length?((0,o.wg)(),(0,o.iD)("div",yi," No Projects Available ")):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),i.loading?((0,o.wg)(),(0,o.iD)("div",_i,[(0,o.Wm)(nt.L,{indeterminate:"",color:"primary"})])):(0,o.kq)("",!0)])),_:1})}function vi(e,t,a,l,i,n){return(0,o.wg)(),(0,o.j4)(q.O,{modelValue:i.form,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{density:"compact",variant:"outlined",items:i.positionsList,"item-value":"positionId","item-title":"positionName",rules:[e.fieldRules.required],placeholder:"Select Role",modelValue:i.projectDetails.roleId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.projectDetails.roleId=e)},null,8,["items","rules","modelValue"])])),_:1})])),_:1}),"Billable"===i.projectDetails.projectType?((0,o.wg)(),(0,o.j4)(p.o,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",variant:"outlined",type:"number",rules:[e.fieldRules.required],placeholder:"rate",modelValue:i.projectDetails.rate,"onUpdate:modelValue":t[1]||(t[1]=e=>i.projectDetails.rate=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e.rL,{density:"compact",variant:"outlined",rules:[e.fieldRules.required],placeholder:"Currency",modelValue:i.projectDetails.currency,"onUpdate:modelValue":t[2]||(t[2]=e=>i.projectDetails.currency=e),items:["USD","Euro","INR","CHF"]},null,8,["rules","modelValue"])])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{rules:[e.fieldRules.required],label:"Start date",type:"date",modelValue:i.projectDetails.startDate,"onUpdate:modelValue":t[3]||(t[3]=e=>i.projectDetails.startDate=e)},null,8,["rules","modelValue"])])),_:1}),(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{rules:[e.fieldRules.required],label:"End date",type:"date",modelValue:i.projectDetails.endDate,"onUpdate:modelValue":t[4]||(t[4]=e=>i.projectDetails.endDate=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.WI)(e.$slots,"default",{form:i.form,projectDetails:i.projectDetails})])),_:3},8,["modelValue"])}var Di={data(){return{form:!1,projectDetails:{projectId:this.projectData.projectId,projectType:this.projectData.projectType,startDate:this.projectData.startDate,endDate:this.projectData.endDate,roleId:this.projectData.roleId,rate:this.projectData.rate,currency:this.projectData.currency},positionsList:[]}},props:["projectData"],computed:{...(0,m.rn)(["fieldRules"]),...(0,m.Se)(["getHeaders"])},methods:{async getPositionsList(){const e="http://localhost:8001/positions",t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.positionsList=e}}},mounted(){this.getPositionsList()}};const ji=(0,k.Z)(Di,[["render",vi]]);var Wi=ji,bi={data(){return{employeeObj:{},loading:!1,projectsLoading:!1,employeeProjectsLoading:!1,addLoading:!1,removeLoading:!1,updateLoading:!1,projectsList:[],employeeProjectsList:[],searchProjectName:"",costPerHour:null,role:null,positionsList:[],positionId:null}},props:[],components:{ProjectAssignmentExpansion:Wi},computed:{...(0,m.rn)(["fieldRules"]),...(0,m.Se)(["getEmployeeDetails","getHeaders"]),distinctProjectsList(){return this.projectsList.filter((e=>this.employeeProjectsList.every((t=>t.projectId!==e.projectId))))}},methods:{openDialog(){this.dialog=!0},onSearchProjects(){this.getProjectsList()},getProjectStatusColor(e){const t=this.getProjectStatus(e);return"Deadline Exceeded"===t?"red":"Not Yet Started"===t?"blue":"In Progress"===t?"green":""},getProjectStatus(e){const t=new Date,a=(0,$.Z)(t,"yyyy-MM-dd");return e.endDate<a?"Deadline Exceeded":e.startDate>a?"Not Yet Started":"In Progress"},async onClickAddProject(e){this.addLoading=!0;const t=`http://localhost:8001/project/employee/save/${this.employeeObj.employeeId}`,a={method:"PUT",...this.getHeaders,body:JSON.stringify(e)},l=await fetch(t,a);l.ok&&(this.getEmployeeProjectsList(),this.$store.dispatch("showNotification","Project Added")),this.addLoading=!1},async onClickRemoveProject(e){this.removeLoading=!0;const t=`http://localhost:8001/project/employee/remove/${this.employeeObj.employeeId}`,a={projectId:e},l={method:"DELETE",...this.getHeaders,body:JSON.stringify(a)},o=await fetch(t,l);o.ok&&(this.getEmployeeProjectsList(),this.$store.dispatch("showNotification","Project Removed")),this.removeLoading=!1},async onClickUpdateProject(e){this.updateLoading=!0;const t=`http://localhost:8001/project/employee/update/${this.employeeObj.employeeId}`,a={method:"PUT",...this.getHeaders,body:JSON.stringify(e)},l=await fetch(t,a);l.ok&&(this.getEmployeeProjectsList(),this.$store.dispatch("showNotification","Project updated")),this.updateLoading=!1},async onClickSave(){const e=`http://localhost:8001/projects/save/${this.employeeObj.employeeId}`,t={method:"PUT",...this.getHeaders,body:JSON.stringify({projectsList:this.employeeProjectsList})},a=await fetch(e,t);a.ok&&(this.dialog=!1,this.$store.dispatch("showNotification","Projects List Updated"))},async getEmployeeData(){const e=await this.getEmployeeDetails(this.$route.params.employeeId);this.employeeObj=e},async getProjectsList(){this.projectsLoading=!0;const e=`http://localhost:8001/projects?projectName=${this.searchProjectName}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.projectsList=e,this.projectsLoading=!1}},async getEmployeeProjectsList(){this.employeeProjectsLoading=!0;const e=`http://localhost:8001/projects/employee/${this.employeeObj.employeeId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);if(a.ok){const e=await a.json();this.employeeProjectsList=e,this.employeeProjectsLoading=!1}}},async mounted(){await this.getEmployeeData(),await this.getProjectsList(),await this.getEmployeeProjectsList()}};const Si=(0,k.Z)(bi,[["render",ki]]);var Ci=Si,Ii=a(652);const Vi={class:"text-h5"},xi={class:"text-h5"},Ti={class:"w-100 d-flex flex-row align-center justify-space-between"},Pi={style:{"font-size":"11px",color:"red"}},Li=(0,o._)("span",{class:"font-weight-medium"},"Personal Mail: ",-1),Ei=(0,o._)("span",{class:"font-weight-medium"},"Official Mail: ",-1),Ni=(0,o._)("span",{class:"font-weight-medium"},"Position : ",-1),Oi=(0,o._)("span",{class:"font-weight-medium"},"Department : ",-1),Ri=(0,o._)("span",{class:"font-weight-medium"},"Admin : ",-1),Ui=(0,o._)("span",{class:"font-weight-medium"},"Reporting Manager : ",-1);function $i(e,t,a,i,n,s){return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"h-100 w-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(F.C,{variant:"elevated"},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,{height:"50",theme:"dark",color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)("PROFILE")])),_:1}),(0,o.Wm)(pi.l)])),_:1}),(0,o.Wm)(c.K,{fluid:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"1"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ii.V,{color:"brown",size:"large"},{default:(0,o.w5)((()=>[(0,o._)("span",Vi,(0,z.zw)(e.employeeDetails.employeeName[0]),1)])),_:1})])),_:1}),(0,o.Wm)(h.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o._)("div",xi,(0,z.zw)(e.employeeDetails.employeeName),1),(0,o._)("div",null,(0,z.zw)(`Id:  ${e.employeeDetails.employeeId} `),1)])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(Je.B,{height:"480",width:"400"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(u.T,(0,o.dG)({variant:"text",color:"blue"},e),{default:(0,o.w5)((()=>[(0,o.Uk)(" Change Password ")])),_:2},1040)])),default:(0,o.w5)((({isActive:a})=>[(0,o.Wm)(he._,{width:"400",height:"480"},{default:(0,o.w5)((()=>[(0,o.Wm)(we.E,null,{default:(0,o.w5)((()=>[(0,o._)("div",Ti,[(0,o.Uk)(" Change Password "),(0,o.Wm)(u.T,{onClick:e=>s.onCloseDialog(a),icon:"mdi-close",variant:"text"},null,8,["onClick"])])])),_:2},1024),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q.O,{modelValue:n.changePasswordForm,"onUpdate:modelValue":t[6]||(t[6]=e=>n.changePasswordForm=e),onSubmit:(0,l.iM)((e=>s.onClickChangePassword(a)),["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{modelValue:n.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>n.currentPassword=e),label:"Current Password",type:n.currentPasswordVisible?"text":"password","append-inner-icon":n.currentPasswordVisible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[1]||(t[1]=e=>n.currentPasswordVisible=!n.currentPasswordVisible),rules:[e.fieldRules.required,e.fieldRules.password]},null,8,["modelValue","type","append-inner-icon","rules"])])),_:1}),(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{modelValue:n.newPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>n.newPassword=e),label:"New Password",type:n.newPasswordVisible?"text":"password","append-inner-icon":n.newPasswordVisible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[3]||(t[3]=e=>n.newPasswordVisible=!n.newPasswordVisible),rules:[e.fieldRules.required,e.fieldRules.password]},null,8,["modelValue","type","append-inner-icon","rules"])])),_:1}),(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{label:"Confirm New Password",modelValue:n.confirmNewPassword,"onUpdate:modelValue":t[4]||(t[4]=e=>n.confirmNewPassword=e),rules:[e.fieldRules.required,n.passwordMatchRule],type:n.confirmNewPasswordVisible?"text":"password","append-inner-icon":n.confirmNewPasswordVisible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[5]||(t[5]=e=>n.confirmNewPasswordVisible=!n.confirmNewPasswordVisible)},null,8,["modelValue","rules","type","append-inner-icon"])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[n.isPasswordValid?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(h.D,{key:0},{default:(0,o.w5)((()=>[(0,o._)("p",Pi,(0,z.zw)(n.passwordError),1)])),_:1})),(0,o.Wm)(h.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.T,{type:"submit",block:"",color:"blue",text:"Change Password",disabled:!n.changePasswordForm,loading:n.changePasswordLoading},null,8,["disabled","loading"])])),_:1})])),_:1})])),_:2},1032,["modelValue","onSubmit"])])),_:2},1024)])),_:2},1024)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Li,(0,o.Uk)(" "+(0,z.zw)(`${e.employeeDetails.personalMail} `),1)])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Ei,(0,o.Uk)(" "+(0,z.zw)(` ${e.employeeDetails.officialMail} `),1)])])),_:1})])),_:1}),(0,o.Wm)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Ni,(0,o.Uk)(" "+(0,z.zw)(` ${e.employeeDetails.positionName} `),1)])])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Oi,(0,o.Uk)(" "+(0,z.zw)(` ${e.employeeDetails.departmentName} `),1)])])),_:1})])),_:1}),(0,o.Wm)(p.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[Ri,(0,o.Uk)(" "+(0,z.zw)(" "+(1===e.employeeDetails.isAdmin?"Yes":"No")),1)])),_:1}),(0,o.Wm)(h.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[Ui,(0,o.Uk)(" "+(0,z.zw)(`${e.employeeDetails.reportingManagerName} `),1)])])),_:1})])),_:1}),(0,o.Wm)(p.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{"min-width":"400",height:"400",class:"overflow-y-auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Assigned Projects ")])),_:1})])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b.i,{lines:"one"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.projectList,((e,t)=>((0,o.wg)(),(0,o.j4)(W.l,{key:e.projectId,title:`${t+1} ${e.projectName}`},null,8,["title"])))),128)),0===e.projectList.length?((0,o.wg)(),(0,o.j4)(W.l,{key:0,title:"No Projects Assigned"})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(h.D,{cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{"min-width":"400",height:"400",class:"overflow-y-auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(ve.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(De.q,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Assigned Employees ")])),_:1})])),_:1}),(0,o.Wm)(fe.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b.i,{lines:"one"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.reportingManagerEmployeesList,(e=>((0,o.wg)(),(0,o.j4)(W.l,{key:e.employeeId,title:`${e.employeeId} - ${e.employeeName}`},null,8,["title"])))),128)),0===n.reportingManagerEmployeesList.length?((0,o.wg)(),(0,o.j4)(W.l,{key:0,title:"No Employees Assigned"})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var Mi={data(){return{changePasswordForm:!1,currentPassword:null,newPassword:null,confirmNewPassword:null,reportingManagerEmployeesList:[],currentPasswordVisible:!1,newPasswordVisible:!1,confirmNewPasswordVisible:!1,isPasswordValid:!0,passwordError:null,changePasswordLoading:!1,passwordMatchRule:()=>this.newPassword===this.confirmNewPassword||"Password Doesn't Match"}},computed:{...(0,m.rn)(["employeeDetails","projectList","employeeId","fieldRules"]),...(0,m.Se)(["getHeaders"])},methods:{async getReportingManagerEmployees(){const e=`http://localhost:8001/reporting_manager/employees/${this.employeeId}`,t={method:"GET",...this.getHeaders},a=await fetch(e,t);a.ok&&(this.reportingManagerEmployeesList=await a.json())},async onClickChangePassword(e){this.changePasswordLoading=!0;const t="http://localhost:8001/password/reset",a={method:"PUT",...this.getHeaders,body:JSON.stringify({currentPassword:this.currentPassword,newPassword:this.newPassword})},l=await fetch(t,a),o=await l.json();l.ok?this.onCloseDialog(e):(this.isPasswordValid=!1,this.passwordError=o.message,console.log(o.message)),this.changePasswordLoading=!1},onCloseDialog(e){e.value=!1,this.changePasswordForm=!1,this.currentPassword=null,this.newPassword=null,this.confirmNewPassword=null,this.currentPasswordVisible=!1,this.newPasswordVisible=!1,this.confirmNewPasswordVisible=!1,this.isPasswordValid=!0,this.passwordError=null}},mounted(){this.getReportingManagerEmployees()}};const Hi=(0,k.Z)(Mi,[["render",$i]]);var Ai=Hi;function zi(e,t){return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"h-100 w-100 d-flex flex-row align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(he._,{variant:"text"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z.f,{src:"https://img.freepik.com/free-vector/page-found-with-people-connecting-plug-concept-illustration_114360-1939.jpg?w=740&t=st=1697115751~exp=1697116351~hmac=a36924e825b54a15fae1862dac081aaca0c951eed47c80bd0df93c72c19b2015",width:"500",height:"500"})])),_:1})])),_:1})}const qi={},Zi=(0,k.Z)(qi,[["render",zi]]);var Fi=Zi;const Gi={class:"w-50 d-none d-md-block"},Yi={key:0,style:{"min-width":"50%"}},Bi=(0,o._)("h1",{class:"user-login-heading"},"RESET PASSWORD",-1),Ki=(0,o._)("br",null,null,-1),Ji={class:"error-msg"},Xi={key:1};function Qi(e,t,a,i,n,s){return(0,o.wg)(),(0,o.j4)(c.K,{fluid:"",class:"container w-100 h-100 d-flex flex-row justify-center align-center"},{default:(0,o.w5)((()=>[200===n.responseStatus?((0,o.wg)(),(0,o.j4)(F.C,{key:0,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o._)("div",Gi,[(0,o.Wm)(Z.f,{class:"flex-grow-0",cover:"",src:"https://img.freepik.com/free-vector/forgot-password-concept-illustration_114360-1123.jpg?w=740&t=st=1698296974~exp=1698297574~hmac=40d9021866084c2ec121b0099c9ca32ae990d76c3d02080043fdc18d554f8f72"})]),n.isPasswordReset?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Yi,[Bi,(0,o.Wm)(q.O,{modelValue:n.form,"onUpdate:modelValue":t[3]||(t[3]=e=>n.form=e),onSubmit:(0,l.iM)(s.onResetPassword,["prevent"]),class:"w-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(G.h,{density:"compact",placeholder:"New Password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",rules:[e.fieldRules.required,e.fieldRules.password],class:"mb-3",modelValue:n.newPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>n.newPassword=e),"append-inner-icon":n.visible?"mdi-eye-off":"mdi-eye","onClick:appendInner":t[1]||(t[1]=e=>n.visible=!n.visible),type:n.visible?"text":"password"},null,8,["rules","modelValue","append-inner-icon","type"]),(0,o.Wm)(G.h,{density:"compact",placeholder:"Confirm Password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",rules:[e.fieldRules.required,e.fieldRules.password,n.confirmPasswordRule],modelValue:n.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>n.confirmPassword=e)},null,8,["rules","modelValue"]),Ki,(0,o._)("p",Ji,(0,z.zw)(n.errorMsg),1),(0,o.Wm)(u.T,{disabled:!n.form,block:"",color:"primary",size:"large",type:"submit",variant:"elevated",loading:n.buttonLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Reset Password ")])),_:1},8,["disabled","loading"])])),_:1},8,["modelValue","onSubmit"])])),n.isPasswordReset?((0,o.wg)(),(0,o.iD)("div",Xi," Password Reset sucessfull, redirecting to login... ")):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),400===n.responseStatus?((0,o.wg)(),(0,o.j4)(F.C,{key:1,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Link Expired ")])),_:1})):(0,o.kq)("",!0),404===n.responseStatus?((0,o.wg)(),(0,o.j4)(F.C,{key:2,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o.Uk)(" Invalid URL ")])),_:1})):(0,o.kq)("",!0),n.pageLoading?((0,o.wg)(),(0,o.j4)(F.C,{key:3,"min-width":"55%",class:"form-sheet mx-auto pa-5 d-flex flex-row justify-center align-center",rounded:""},{default:(0,o.w5)((()=>[(0,o.Wm)(nt.L,{indeterminate:"",color:"primary"})])),_:1})):(0,o.kq)("",!0)])),_:1})}var en={data(){return{pageLoading:!0,form:!1,visible:!1,newPassword:null,confirmPassword:null,responseStatus:null,buttonLoading:!1,isPasswordReset:!1,errorMsg:"",confirmPasswordRule:e=>e===this.newPassword||"Password doesn't match"}},computed:{...(0,m.rn)(["fieldRules"]),...(0,m.Se)(["getHeaders"])},methods:{async checkResetPage(){this.pageLoading=!0;const{resetToken:e}=this.$route.params,t=`http://localhost:8001/reset-link-verify/${e}`,a={method:"GET",...this.getHeaders},l=await fetch(t,a);if(this.responseStatus=l.status,console.log(this.responseStatus),500!==l.status){const e=await l.json();console.log(e.message)}this.pageLoading=!1},async onResetPassword(){this.buttonLoading=!0;const{resetToken:e}=this.$route.params,t="http://localhost:8001/reset-password/",a={method:"PUT",...this.getHeaders,body:JSON.stringify({newPassword:this.newPassword,confirmPassword:this.confirmPassword,resetToken:e})},l=await fetch(t,a),o=await l.json();this.errorMsg=o.message,this.buttonLoading=!1,l.ok&&(this.isPasswordReset=!0,setTimeout((()=>{this.$router.replace("/login")}),2e3))}},mounted(){this.checkResetPage()}};const tn=(0,k.Z)(en,[["render",Qi]]);var an=tn;const ln=(0,A.p7)({history:(0,A.PO)(),routes:[{name:"Login",path:"/login",component:ue},{name:"Home",path:"/",component:fa},{name:"Submit Timesheet",path:"/submit_timesheet",component:Bo},{name:"Employee TimeSheet",path:"/employee_timesheet/:timeSheetId",component:Fa},{name:"Search TimeSheet",path:"/search_timesheet",component:pa},{name:"Export",path:"/export",component:Oa},{name:"Employees",path:"/employees",component:al},{name:"Projects",path:"/projects",component:Wl},{name:"Customers",path:"/customers",component:Rl},{name:"Review Timesheet",path:"/review_timesheets",component:di},{name:"Project Assignment",path:"/project_assignment/:employeeId",component:Ci},{name:"Profile",path:"/profile",component:Ai},{name:"Reset Password",path:"/reset-password/:resetToken",component:an},{name:"Not Found",path:"/:catchAll(.*)",component:Fi}]});ln.beforeEach(((e,t,a)=>{const l=nn.getters.getIsLogin;"/login"!==e.fullPath&&nn.commit("setRedirectPath",e.fullPath),"Login"===e.name||l||"Reset Password"===e.name?a():a({name:"Login"})}));var on=ln,nn=(0,m.MT)({state:{jwtToken:"",redirectPath:"/",employeeDetails:{},employeeId:null,employeeName:"",email:"",isAdmin:!1,isLogin:!1,daysOfWeek:[],selectedWeek:"2023-W36",startDate:"",endDate:"",projectList:[],notificationObj:{show:!1,message:""},fieldRules:{required(e){return null!==e&&""!==e||"Required"},email(e){return!(!e.includes("@")||!e.includes(".com"))||"Invalid Email Address"},password(e){return e.length>=8||"Password must be at least 8 characters"}}},mutations:{updateJwtToken(e,t){e.jwtToken=t,localStorage.setItem("timesheetJwtToken",JSON.stringify(t))},updateEmployeeDetailsAndLogin(e,t){e.employeeId=t.employeeId,e.employeeName=t.employeeName,e.email=t.officialMail,e.isAdmin=t.isAdmin,e.employeeDetails=t,e.isLogin=!0,on.push(e.redirectPath)},setRedirectPath(e,t){e.redirectPath=t},updateDaysOfWeek(e){const{selectedWeek:t}=e,[a,l]=t.split("-W"),o=new Date(a,0,1),i=(0,R.Z)(o,{weekStartsOn:1}),n=(0,U.Z)(i,l),s=(0,$.Z)(n,"E,MMM dd"),d=[s];let r=null;for(let m=1;m<=6;m++)r=(0,M.Z)(n,m),d.push((0,$.Z)(r,"E,MMM dd"));e.daysOfWeek=d,e.startDate=(0,$.Z)(n,"yyyy-MM-dd"),e.endDate=(0,$.Z)(r,"yyyy-MM-dd")},updateRowInput(e,t){const{weeklyProjectHoursList:a,selectedWeek:l}=e,{id:o,name:i,value:n}=t,s=a[l].map((e=>{if(e.id===o){const t={...e};return t[i]=n,t}return e}));e.weeklyProjectHoursList[l]=s},updateSelectedWeek(e,t){e.selectedWeek=t},deleteRow(e,t){const{weeklyProjectHoursList:a,selectedWeek:l}=e,o=a[l].filter((e=>e.id!==t));e.weeklyProjectHoursList[l]=o},onLogout(e){e.isLogin=!1,localStorage.removeItem("timesheetJwtToken")},showNotification(e,t){e.notificationObj={show:!0,message:t}},hideNotification(e){e.notificationObj={show:!1,message:""}}},actions:{async onSuccesfullLogin(e,t){e.commit("updateJwtToken",t),await this.dispatch("getEmployeeProfileDetails")},checkUserValidity(e){let t=localStorage.getItem("timesheetJwtToken");t=JSON.parse(t),null!==t&&(e.state.jwtToken=t,this.dispatch("getEmployeeProfileDetails"))},async getEmployeeProfileDetails(e){const t="http://localhost:8001/employee/profile",a={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e.state.jwtToken}`}},l=await fetch(t,a);if(l.ok){const t=await l.json();console.log(t),e.commit("updateEmployeeDetailsAndLogin",t),this.dispatch("getProjectData")}},showNotification(e,t){e.commit("showNotification",t),setTimeout((()=>{e.commit("hideNotification")}))},hideNotification(e){e.commit("hideNotification")},updateRowInput(e,t){e.commit("updateRowInput",t)},updateSelectedWeek(e,t){e.commit("updateSelectedWeek",t),e.commit("updateDaysOfWeek")},onLogout(e){e.commit("onLogout"),on.push("/login")},async getProjectData(e){const t=`http://localhost:8001/projects/employee/${e.state.employeeId}`,a={method:"GET",headers:{"Content-Type":"application/json"}},l=await fetch(t,a);if(l.ok){const t=await l.json();e.state.projectList=t,console.log(e.state.projectList)}},async approveTimeSheet(e,t){const a=`http://localhost:8001/timesheet/approve/${t}`,l={method:"PUT",headers:{"Content-Type":"application/json"}},o=await fetch(a,l);if(o.ok){const t=await o.json();e.commit("showNotification","Timesheet Approved"),console.log(t)}},async submitTimeSheet(e,t){const a=`http://localhost:8001/timesheet/submit/${t}`,l={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"}},o=await fetch(a,l);if(o.ok){const t=await o.json();e.commit("showNotification",t.text),console.log(t.text)}},async denyTimeSheet(e,t){const a=`http://localhost:8001/timesheet/deny/${t}`,l={method:"PUT",headers:{"Content-Type":"application/json"}},o=await fetch(a,l);if(o.ok){const t=await o.json();e.commit("showNotification","Timesheet Denied"),console.log(t)}},async openTimeSheet(e,t){const a=`http://localhost:8001/timesheet/open/${t}`,l={method:"PUT",headers:{"Content-Type":"application/json"}},o=await fetch(a,l);if(o.ok){const t=await o.json();e.commit("showNotification","Timesheet Re-opened"),console.log(t)}},async sendEmail(e,t){console.log(t)},async sendEmailOnAction(e,t){const{timeSheetId:a,employeeName:l,startDate:o,endDate:i,message:n,officialMail:s,action:d}=t;console.log(s),console.log(e.state.employeeDetails.officialMail);try{await H.ZP.send("service_evxhn1b","template_pdlg2yl",{action:d,employeeName:l,timeSheetId:a,startDate:o,endDate:i,message:n,toMail:null!==s?s:"",fromMail:e.state.employeeDetails.officialMail},"75B7CIXrKgR0C1weF")}catch(r){console.log(r)}}},getters:{getIsLogin(e){return e.isLogin},getFormatedDateString(){return e=>{if(null===e||""===e)return"-";const t=new Date(e),a=(0,$.Z)(t,"dd, MMM yyyy");return a}},getEmployeeDetails(e){return async t=>{const a=`http://localhost:8001/employee/${t}`,l={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e.jwtToken}`}},o=await fetch(a,l);return o.ok?await o.json():{}}},getHeaders(e){return{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e.jwtToken}`}}}}}),sn=(a(9773),a(8727)),dn=(0,sn.Rd)();async function rn(){const e=await a.e(461).then(a.t.bind(a,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}rn(),(0,l.ri)(O).use(nn).use(dn).use(on).mount("#app")}},t={};function a(l){var o=t[l];if(void 0!==o)return o.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,l,o,i){if(!l){var n=1/0;for(m=0;m<e.length;m++){l=e[m][0],o=e[m][1],i=e[m][2];for(var s=!0,d=0;d<l.length;d++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](l[d])}))?l.splice(d--,1):(s=!1,i<n&&(n=i));if(s){e.splice(m--,1);var r=o();void 0!==r&&(t=r)}}return t}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[l,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(l,o){if(1&o&&(l=this(l)),8&o)return l;if("object"===typeof l&&l){if(4&o&&l.__esModule)return l;if(16&o&&"function"===typeof l.then)return l}var i=Object.create(null);a.r(i);var n={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&l;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){n[e]=function(){return l[e]}}));return n["default"]=function(){return l},a.d(i,n),i}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,l){return a.f[l](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+(461===e?"webfontloader":e)+"."+{269:"cd6ff2c2",297:"cf1c9643",461:"6e45b15f",617:"5a1749e4"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="timesheetapp:";a.l=function(l,o,i,n){if(e[l])e[l].push(o);else{var s,d;if(void 0!==i)for(var r=document.getElementsByTagName("script"),m=0;m<r.length;m++){var u=r[m];if(u.getAttribute("src")==l||u.getAttribute("data-webpack")==t+i){s=u;break}}s||(d=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+i),s.src=l),e[l]=[o];var c=function(t,a){s.onerror=s.onload=null,clearTimeout(p);var o=e[l];if(delete e[l],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=c.bind(null,s.onerror),s.onload=c.bind(null,s.onload),d&&document.head.appendChild(s)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.f.j=function(t,l){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)l.push(o[2]);else{var i=new Promise((function(a,l){o=e[t]=[a,l]}));l.push(o[2]=i);var n=a.p+a.u(t),s=new Error,d=function(l){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var i=l&&("load"===l.type?"missing":l.type),n=l&&l.target&&l.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",s.name="ChunkLoadError",s.type=i,s.request=n,o[1](s)}};a.l(n,d,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,i,n=l[0],s=l[1],d=l[2],r=0;if(n.some((function(t){return 0!==e[t]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(d)var m=d(a)}for(t&&t(l);r<n.length;r++)i=n[r],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(m)},l=self["webpackChunktimesheetapp"]=self["webpackChunktimesheetapp"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(3854)}));l=a.O(l)})();
//# sourceMappingURL=app.f2cd4e0d.js.map